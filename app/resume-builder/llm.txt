### Install Puck Cloud Client Package

Source: https://puckeditor.com/docs/ai/getting-started

Install the @puckeditor/cloud-client package using your preferred package manager. This package enables backend integration with Puck Cloud for proxying AI requests.

```npm
npm i @puckeditor/cloud-client --save
```

```pnpm
pnpm add @puckeditor/cloud-client
```

```yarn
yarn add @puckeditor/cloud-client
```

```bun
bun add @puckeditor/cloud-client
```

--------------------------------

### Install Puck AI Plugin Package

Source: https://puckeditor.com/docs/ai/getting-started

Install the @puckeditor/plugin-ai package using your preferred package manager (npm, pnpm, yarn, or bun). This package provides the AI chat interface plugin for Puck Editor.

```npm
npm i @puckeditor/plugin-ai --save
```

```pnpm
pnpm add @puckeditor/plugin-ai
```

```yarn
yarn add @puckeditor/plugin-ai
```

```bun
bun add @puckeditor/plugin-ai
```

--------------------------------

### Configure API Key Environment Variable

Source: https://puckeditor.com/docs/ai/getting-started

Set the PUCK_API_KEY environment variable with your generated API key from the Puck dashboard. This key authenticates requests to the Puck Cloud service.

```env
PUCK_API_KEY=SECRET
```

--------------------------------

### Install Puck AI Cloud Client with bun

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/installation

Installs the Puck AI Cloud Client package using the bun runtime and package manager. bun is a fast, all-in-one JavaScript runtime.

```bash
bun add @puckeditor/cloud-client
```

--------------------------------

### Puck Editor Initial Data Setup

Source: https://puckeditor.com/docs/api-reference/components/puck

Illustrates how to provide initial data to the Puck editor. This example defines the structure of the content, including a 'HeadingBlock' with specific props like 'children' and 'id'. This data determines the initial state of the editor's content.

```javascript
export function Editor() {
  return (
    <Puck
      data={{
        content: [
          {
            props: { children: "Hello, world", id: "id" },
            type: "HeadingBlock",
          },
        ],
        root: {},
      }}
      // ...
    />
  );
}
```

--------------------------------

### Install Puck AI Cloud Client with pnpm

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/installation

Installs the Puck AI Cloud Client package using the pnpm package manager. pnpm is known for its efficient disk space usage.

```bash
pnpm add @puckeditor/cloud-client
```

--------------------------------

### Install Puck AI Plugin using yarn

Source: https://puckeditor.com/docs/api-reference/ai/ai-plugin/installation

Installs the AI plugin for Puck Editor using yarn. This command fetches and installs the AI plugin package.

```bash
yarn add @puckeditor/plugin-ai
```

--------------------------------

### Install Puck AI Cloud Client with npm

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/installation

Installs the Puck AI Cloud Client package using the npm package manager. This is a common method for Node.js projects.

```bash
npm i @puckeditor/cloud-client --save
```

--------------------------------

### Install Puck Editor Package

Source: https://puckeditor.com/docs/getting-started

Installs the Puck editor package using different package managers. Ensure you have Node.js and a package manager (npm, pnpm, yarn, bun) installed.

```npm
npm i @measured/puck --save
```

```pnpm
pnpm add @measured/puck
```

```yarn
yarn add @measured/puck
```

```bun
bun add @measured/puck
```

--------------------------------

### Install Puck AI Plugin using bun

Source: https://puckeditor.com/docs/api-reference/ai/ai-plugin/installation

Installs the AI plugin for Puck Editor using bun. This command adds the AI plugin package to your project dependencies.

```bash
bun add @puckeditor/plugin-ai
```

--------------------------------

### Install Puck AI Cloud Client with yarn

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/installation

Installs the Puck AI Cloud Client package using the yarn package manager. yarn is another popular choice for JavaScript package management.

```bash
yarn add @puckeditor/cloud-client
```

--------------------------------

### Puck Editor Initial History Setup

Source: https://puckeditor.com/docs/api-reference/components/puck

Illustrates how to set the initial undo/redo history state for the Puck editor when using the `usePuck` history API. This example defines a history state with specific data and sets the initial index.

```javascript
const historyState = {
  data: {
    root: {
      props: { title: "My History" },
    },
  },
};

export function Editor() {
  return (
    <Puck
      initialHistory={{
        histories: [{ state: historyState }],
        index: 0,
      }}
      // ...
    />
  );
}
```

--------------------------------

### Install Puck AI Plugin using pnpm

Source: https://puckeditor.com/docs/api-reference/ai/ai-plugin/installation

Installs the AI plugin for Puck Editor using pnpm. This command adds the AI plugin package to your project.

```bash
pnpm add @puckeditor/plugin-ai
```

--------------------------------

### Install Puck AI Plugin using npm

Source: https://puckeditor.com/docs/api-reference/ai/ai-plugin/installation

Installs the AI plugin for Puck Editor using npm. This command adds the necessary package to your project's dependencies.

```bash
npm i @puckeditor/plugin-ai --save
```

--------------------------------

### tool()

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/installation

Defines a function that the agent can execute on your server. This function is currently in Beta.

```APIDOC
## tool()

### Description
Define a function that the agent can execute on your server.

### Method
Not specified (typically a function call in a Node.js client setup)

### Endpoint
Not applicable (client-side function definition)

### Parameters
None specified

### Request Example
```javascript
// Example usage (syntax may vary based on actual implementation)
import { tool } from '@puckeditor/cloud-client';

const sendEmailTool = tool({
  name: 'sendEmail',
  description: 'Sends an email to a recipient.',
  parameters: {
    to: 'string',
    subject: 'string',
    body: 'string'
  },
  handler: async ({ to, subject, body }) => {
    console.log(`Sending email to ${to} with subject: ${subject}`);
    // ... actual email sending logic
    return { success: true };
  }
});

// This tool definition would then be used in conjunction with the AI agent setup.
```

### Response
#### Success Response (200)
Returns a tool definition object.

#### Response Example
```json
// Tool definition object structure
{
  "name": "sendEmail",
  "description": "Sends an email to a recipient.",
  "parameters": {
    "to": "string",
    "subject": "string",
    "body": "string"
  },
  "handler": "function"
}
```
```

--------------------------------

### Create AI Plugin API Reference

Source: https://puckeditor.com/docs/api-reference/ai/ai-plugin/installation

Details the `createAiPlugin()` function, which is used to create an AI plugin for Puck Editor. This API is currently available.

```javascript
createAiPlugin()
```

--------------------------------

### Puck AI Cloud Client API: tool()

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/installation

The tool() API function allows you to define a function that the agent can execute on your server. This API is currently in Beta.

```javascript
// Example usage (implementation details not provided in source)
// puckAI.tool(myServerFunction);
```

--------------------------------

### Provide Instructions to AI for Components

Source: https://puckeditor.com/docs/ai/ai-configuration

This code demonstrates how to provide natural language instructions to the AI agent for a component. The 'instructions' parameter within the 'ai' configuration guides the agent on how to use the component.

```javascript
const config = {
  components: {
    HeadingBlock: {
      ai: {
        instructions: "Always place this first",
      },
      fields: {
        title: {
          type: "text",
        },
      },
      render: ({ title }) => <h1>{title}</h1>,
    },
  },
};
```

--------------------------------

### Example of Custom Dynamic Zone Migration (Columns Component)

Source: https://puckeditor.com/docs/api-reference/functions/migrate

This example illustrates the 'before' and 'after' state of data when migrating dynamic zones for a 'Columns' component. It shows how content from the `zones` object is restructured into the `columns` prop based on a custom migration function.

```json
{
  "root": {
    "props": {
      "title": "Legacy Zones Migration"
    }
  },
  "content": [
    {
      "type": "Columns",
      "props": {
        "columns": [{}],
        "id": "Columns-eb9dfe22-4408-44e6-b8e5-fbaedbbdb3be"
      }
    }
  ],
  "zones": {
    "Columns-eb9dfe22-4408-44e6-b8e5-fbaedbbdb3be:column-0": [
      {
        "type": "Text",
        "props": {
          "text": "Drop zone 1",
          "id": "Text-c2b5c0a5-d76b-4120-8bb3-99934e119967"
        }
      }
    ]
  }
}
```

```json
{
  "root": {
    "props": {
      "title": "Legacy Zones Migration"
    }
  },
  "content": [
    {
      "type": "Columns",
      "props": {
        "columns": [
          {
            "column": [
              {
                "type": "Text",
                "props": {
                  "text": "Drop zone 1",
                  "id": "Text-c2b5c0a5-d76b-4120-8bb3-99934e119967"
                }
              }
            ]
          }
        ],
        "id": "Columns-eb9dfe22-4408-44e6-b8e5-fbaedbbdb3be"
      }
    }
  ]
}
```

--------------------------------

### Configure AI Plugin Chat Example Prompts

Source: https://puckeditor.com/docs/api-reference/ai/ai-plugin/create-ai-plugin

This code snippet shows how to configure the `chat.examplePrompts` option for the AI plugin. This allows you to provide predefined prompts that appear below the text input, which users can click to submit.

```javascript
const chatPlugin = chat({
  examplePrompts: [
    { label: "Landing page", prompt: "Create a landing page about dogs" },
  ],
});
```

--------------------------------

### puckHandler()

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/installation

Creates a server handler for `/api/puck/*` endpoints used by the plugin. This function is currently in Beta.

```APIDOC
## puckHandler()

### Description
Create server handler for `/api/puck/*` endpoints used by the plugin.

### Method
Not specified (typically a function call in a Node.js server setup)

### Endpoint
`/api/puck/*` (This handler is for server-side endpoints)

### Parameters
None specified

### Request Example
```javascript
// Example usage (syntax may vary based on actual implementation)
import express from 'express';
import { puckHandler } from '@puckeditor/cloud-client';

const app = express();

// Assuming 'app' is your Express application instance
app.use('/api/puck', puckHandler());

// ... other server configurations
```

### Response
#### Success Response (200)
Handles requests to the `/api/puck/*` endpoints.

#### Response Example
Not applicable (server-side handler)
```

--------------------------------

### Provide Instructions to AI for Fields

Source: https://puckeditor.com/docs/ai/ai-configuration

This example shows how to apply AI instructions at the field level. The 'instructions' parameter within a field's 'ai' configuration allows for specific guidance, such as enforcing capitalization.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "text",
          ai: {
            instructions: "Always use caps",
          },
        },
      },
      render: ({ title }) => <h1>{title}</h1>,
    },
  },
};
```

--------------------------------

### Puck Root Parameter Example

Source: https://puckeditor.com/docs/api-reference/data-model/data

An example of the 'root' parameter, an object describing data for the root configuration. It includes properties like 'title' within the 'props' object.

```json
{
  "content": [],
  "root": {
    "props": {
      "title": "My page"
    }
  },
  "zones": {}
}
```

--------------------------------

### generate()

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/installation

Generates a page or updates an existing one. This function is currently Unavailable.

```APIDOC
## generate()

### Description
Generate a page, or update an existing one.

### Method
Not specified (typically a function call in a Node.js client)

### Endpoint
Not applicable (client-side function)

### Parameters
None specified

### Request Example
```javascript
// Example usage (syntax may vary based on actual implementation)
import { generate } from '@puckeditor/cloud-client';

// This function is currently unavailable.
// generate({
//   prompt: 'Create a landing page for a new app.'
// }).then(pageData => {
//   console.log(pageData);
// });
```

### Response
#### Success Response (200)
Returns generated or updated page data.

#### Response Example
```json
// Example page data structure (exact format may vary)
{
  "id": "page-123",
  "content": {
    "type": "root",
    "children": [
      // ... page content structure
    ]
  }
}
```
```

--------------------------------

### Puck Zones Parameter Example

Source: https://puckeditor.com/docs/api-reference/data-model/data

An example of the 'zones' parameter, an object describing nested content regions for each DropZone. The key 'zoneKey' is a compound of component 'id' and DropZone 'zone'.

```json
{
  "content": [],
  "root": {},
  "zones": {
    "HeadingBlock-1234:my-content": [
      {
        "type": "HeadingBlock",
        "props": {
          "id": "HeadingBlock-1234",
          "title": "Hello, world"
        }
      }
    ]
  }
}
```

--------------------------------

### Render Puck Editor

Source: https://puckeditor.com/docs/api-reference/components/puck

Demonstrates the basic setup for rendering the Puck editor component. It requires a configuration object for components and initial data. This is the fundamental way to initialize the editor in a React application.

```javascript
import { Puck } from "@measured/puck";

const config = {
  components: {},
};

const initialData = {
  content: [],
  root: {},
};

export function Editor() {
  return <Puck config={config} data={initialData} />;
}
```

--------------------------------

### Puck Content Parameter Example

Source: https://puckeditor.com/docs/api-reference/data-model/data

An example of the 'content' parameter, which is an array of ComponentData objects. Each object specifies the 'type' and 'props' of a component instance.

```json
{
  "content": [
    {
      "type": "HeadingBlock",
      "props": {
        "id": "HeadingBlock-1234",
        "title": "Hello, world"
      }
    }
  ],
  "root": {},
  "zones": {}
}
```

--------------------------------

### Server Render Example in Next.js (TypeScript)

Source: https://puckeditor.com/docs/integrating-puck/server-components

Demonstrates how to use a server-side configuration with the `<Render>` component within a Next.js application router. It imports the server config and fetches data on the server before rendering. This example assumes `getData` is a server function and `Render` is the rendering component.

```typescript
import { config } from "../puck.config.server.tsx";

export default async function Page() {
  const data = await getData(); // Some server function

  return <Render data={data} config={config} />;
}
```

--------------------------------

### Basic Component Render Function (JavaScript)

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Illustrates a minimal component configuration with only a 'render' function. This example shows how to define the visual output of a component without any specific fields.

```javascript
const config = {
  components: {
    HeadingBlock: {
      render: () => <h1>Hello, world</h1>,
    },
  },
};
```

--------------------------------

### Complete Textarea Component Example

Source: https://puckeditor.com/docs/api-reference/fields/textarea

Full example demonstrating a textarea field configuration with rendering logic. Shows how to extract the textarea value from props and render it in a component.

```JavaScript
const config = {
  components: {
    Example: {
      fields: {
        description: {
          type: "textarea",
        },
      },
      render: ({ description }) => {
        return <p>{description}</p>;
      },
    },
  },
};
```

--------------------------------

### Generate Puck Application

Source: https://puckeditor.com/docs/getting-started

Generates a new Puck application using a recipe with npx. This command requires Node.js and npm (or a compatible package manager) to be installed.

```bash
npx create-puck-app my-app
```

--------------------------------

### Configure Puck AI with Tools (JavaScript)

Source: https://puckeditor.com/docs/ai/tools

Demonstrates how to configure Puck AI's `puckHandler` with custom tools. Each tool has a description, an input schema defined using Zod, and an execute function that runs on the server. This example defines a `getProducts` tool.

```javascript
import { puckHandler, tool } from "@puckeditor/cloud-client";
import z from "zod/v4";
 
const handler = puckHandler({
  ai: {
    tools: {
      getProducts: tool({
        description: "Get a list of products",
        inputSchema: z.object(), // No arguments needed
        execute: () => [
          { code: "google_maps", title: "Google Maps" },
          { code: "google_calendar", title: "Google Calendar" },
        ],
      }),
    },
  },
});
```

--------------------------------

### Puck AI Cloud Client API: puckHandler()

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/installation

The puckHandler() API function is used to create a server handler for `/api/puck/*` endpoints, which are utilized by the plugin. This API is currently in Beta.

```javascript
// Example usage (implementation details not provided in source)
// const handler = puckAI.puckHandler();
```

--------------------------------

### createAiPlugin

Source: https://puckeditor.com/docs/api-reference/ai/ai-plugin/create-ai-plugin

Creates an AI plugin for Puck Editor, enabling a chat interface for interacting with Puck AI. This function allows configuration of example prompts, submission callbacks, and the API host.

```APIDOC
## createAiPlugin

### Description
Creates a plugin that shows a chat interface for interacting with Puck AI.

### Method
`createAiPlugin()`

### Endpoint
N/A (Client-side function)

### Parameters
#### Optional params
- **chat.examplePrompts** (Object) - Optional - Example prompts to show beneath the text input. Will send the prompt on click.
  - Example: `[{ label: "Landing page", prompt: "Create a landing page about dogs" }]`
- **chat.onSubmit** (Function) - Optional - A callback that receives the prompt when the user submits the form.
  - Example: `(prompt) => console.log(prompt)`
- **host** (String) - Optional - Configure the API host that the plugin will call during a chat. This should be your server.
  - Example: `"https://www.example.com/api/puck"`

### Request Example
```javascript
import { createAiPlugin } from "@puckeditor/plugin-ai";
import "@puckeditor/plugin-ai/styles.css";

const aiPlugin = createAiPlugin({
  chat: {
    examplePrompts: [
      { label: "Landing page", prompt: "Create a landing page about dogs" },
    ],
    onSubmit: (prompt) => console.log(prompt),
  },
  host: "https://www.example.com/api/puck",
});

export function Editor() {
  return (
    <Puck
      plugins={[aiPlugin]}
      // ...
    />
  );
}
```

### Response
This function returns an AI plugin instance that can be passed to the `Puck` component's `plugins` prop.
```

--------------------------------

### Generate Page: Using Required Parameters (JavaScript)

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/generate

This example focuses on the mandatory `prompt` and `config` parameters required for the `generate` function. It illustrates how to structure these parameters to initiate page generation with custom component definitions.

```javascript
import { generate } from "@puckeditor/cloud-client";

const page = await generate({
  prompt: "Create a page about dogs",
  config: {
    components: {
      HeadingBlock: {
        fields: {
          title: { type: "text" },
        },
        render: ({ title }) => title,
      },
    },
  },
});
```

--------------------------------

### chat()

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/installation

Creates a chat stream and intercepts chat requests made by the plugin. This function is currently in Beta.

```APIDOC
## chat()

### Description
Create a chat stream and intercept chat requests made by the plugin.

### Method
Not specified (typically a function call in a Node.js client)

### Endpoint
Not applicable (client-side function)

### Parameters
None specified

### Request Example
```javascript
// Example usage (syntax may vary based on actual implementation)
import { chat } from '@puckeditor/cloud-client';

const stream = chat();
stream.on('message', (msg) => {
  console.log(msg);
});
```

### Response
#### Success Response (200)
Returns a chat stream object.

#### Response Example
```json
// Stream object with methods to send/receive messages
{
  "on": "function",
  "send": "function"
}
```
```

--------------------------------

### Generate Page: Customizing Host (JavaScript)

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/generate

This example shows how to specify a custom `host` for the Puck Cloud API. This is useful for private deployments or when using a specific API endpoint.

```javascript
import { generate } from "@puckeditor/cloud-client";

const page = await generate({
  prompt: "Create a new homepage",
  config: {
    components: {
      HeadingBlock: {
        fields: {
          title: { type: "text" },
        },
        render: ({ title }) => title,
      },
    },
  },
  host: "https://www.example.com/api",
});
```

--------------------------------

### Generate Page: Providing Context (JavaScript)

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/generate

Demonstrates how to use the `context` parameter to provide specific instructions or background information to the AI model, guiding the page generation process. This allows for more tailored content creation.

```javascript
import { generate } from "@puckeditor/cloud-client";

const page = await generate({
  prompt: "Create a new homepage",
  config: {
    components: {
      HeadingBlock: {
        fields: {
          title: { type: "text" },
        },
        render: ({ title }) => title,
      },
    },
  },
  context: "We are Google. Your job is to create Google landing pages.",
});
```

--------------------------------

### Puck Editor: Extending Functionality with Plugins

Source: https://puckeditor.com/docs/api-reference/components/puck

The `plugins` prop accepts an array of plugins to enhance Puck's capabilities. This example includes the `headingAnalyzer` plugin for custom functionality.

```javascript
import headingAnalyzer from "@measured/puck-plugin-heading-analyzer";
 
export function Editor() {
  return (
    <Puck
      plugins={[headingAnalyzer]}
      // ...
    />
  );
}
```

--------------------------------

### Migrate Root Data to Props

Source: https://puckeditor.com/docs/api-reference/functions/migrate

This migration example demonstrates how data previously stored in the root object is moved to the `props` object. This restructuring helps in organizing component-specific data within the `props` field.

```json
{
  "root": {
    "title": "Hello, world"
  }
}
```

```json
{
  "root": {
    "props": { "title": "Hello, world" }
  }
}
```

--------------------------------

### Generate Page: Integrating Tools (JavaScript)

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/generate

This example demonstrates how to define and use `tools` within the `generate` function. Tools enable the AI to execute server-side functions or retrieve data, influencing the page generation process.

```javascript
import { generate, tool } from "@puckeditor/cloud-client";

const page = await generate({
  prompt: "Create a page about our products",
  config: {
    components: {
      HeadingBlock: {
        fields: {
          title: { type: "text" },
        },
        render: ({ title }) => title,
      },
    },
  },
  tools: {
    getProducts: tool({
      description: "Get a list of product codes",
      inputSchema: z.object(),
      execute: async () => {
        return [
          {
            name: "Google Maps",
            product_code: "maps",
          },
          {
            name: "Google Calendar",
            product_code: "calendar",
          },
        ];
      },
    }),
  },
});
```

--------------------------------

### Configure AI Plugin API Host

Source: https://puckeditor.com/docs/api-reference/ai/ai-plugin/create-ai-plugin

This example demonstrates how to configure the `host` parameter for the AI plugin. This setting specifies the API endpoint URL that the plugin will contact to handle chat interactions, typically your server's API.

```javascript
const aiPlugin = createAiPlugin({
  host: "https://www.example.com/api/puck",
});
```

--------------------------------

### Provide Context for One-Off Pages using generate()

Source: https://puckeditor.com/docs/ai/business-context

Enhance the generation of one-off pages by providing specific business information through the `context` parameter in the `generate()` function. This parameter works alongside `config` and `prompt` to guide the page creation process.

```javascript
import { generate } from "@puckeditor/cloud-client";

await generate({
  config,
  context: "We are Google. You help us build Google landing pages.",
  prompt: "Create a page about our maps product",
});
```

--------------------------------

### Puck AI Cloud Client API: chat()

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/installation

The chat() API function is used to create a chat stream and intercept chat requests made by the plugin. This API is currently in Beta.

```javascript
// Example usage (implementation details not provided in source)
// const stream = puckAI.chat();
```

--------------------------------

### Provide Hints for Tool Data Usage in UI Fields (JavaScript)

Source: https://puckeditor.com/docs/ai/tools

Demonstrates how to guide the AI to use specific tool data within UI components. By adding an `instructions` field within the `ai` configuration of a component's field, you can encourage the agent to fetch and use data from a designated tool, such as `getProducts` for a title.

```javascript
const config = {
  components: {
    ProductBlock: {
      fields: {
        title: {
          type: "text",
          ai: {
            instructions: "Always use a title provided by the getProducts tool",
          },
        },
      },
      render: ({ title }) => <h1>{title}</h1>,
    },
  },
};
```

--------------------------------

### Configuring Components for <Render>

Source: https://puckeditor.com/docs/api-reference/components/render

This example shows how to define a custom component, 'HeadingBlock', within the 'config' prop for the <Render> component. It specifies the 'fields' for the component and a 'render' function to define its visual output.

```jsx
export function Example() {
  return (
    <Render
      config={{
        components: {
          HeadingBlock: {
            fields: {
              children: {
                type: "text",
              },
            },
            render: ({ children }) => {
              return <h1>{children}</h1>;
            },
          },
        },
      }}
      // ...
    />
  );
}
```

--------------------------------

### Configure AI Instructions for a Component

Source: https://puckeditor.com/docs/api-reference/ai/configuration/components

This snippet demonstrates how to set AI instructions for a specific component, such as `HeadingBlock`. These instructions guide the AI's behavior when processing or generating content for this component. It requires a `components` object where each component can have an `ai` configuration.

```javascript
const config = {
  components: {
    HeadingBlock: {
      ai: {
        instructions: "Always place this first",
      },
      fields: {
        title: {
          type: "text",
        },
      },
      render: ({ title }) => <h1>{title}</h1>,
    },
  },
};

```

--------------------------------

### Configure Component with Fields and Render Function (JavaScript)

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Defines the configuration for a 'HeadingBlock' component, specifying its fields (like 'title') and a render function to display it. This is a fundamental setup for custom components in Puck.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "text",
        },
      },
      render: ({ title }) => <h1>{title}</h1>,
    },
  },
};
```

--------------------------------

### Asynchronous Permission Resolution in JavaScript

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

This `resolvePermissions` function demonstrates asynchronous permission resolution. It checks if the `example` prop has changed; if not, it returns `lastPermissions`. Otherwise, it awaits the result of `expensiveAsyncOperation()` to determine the new permissions.

```javascript
const resolvePermissions = async ({ props }, { changed, lastPermissions }) => {
  if (!changed.example) {
    return lastPermissions; // Return the last permissions unless the `example` prop has changed
  }
 
  return await expensiveAsyncOperation();
};
```

--------------------------------

### Puck Handler with AI Tools for Function Execution

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/puck-handler

Configures the puckHandler to include AI tools, enabling the agent to execute custom functions on the server. This example defines a 'getProducts' tool that returns a list of product codes. It requires 'zod' for schema definition and returns a handler function.

```javascript
import { tool } from "@puckeditor/cloud-client";
import { z } from "zod";

const handler = puckHandler({
  ai: {
    tools: {
      getProducts: tool({
        description: "Get a list of product codes",
        inputSchema: z.object(),
        execute: async () => {
          return [
            {
              name: "Google Maps",
              product_code: "maps",
            },
            {
              name: "Google Calendar",
              product_code: "calendar",
            },
          ];
        },
      }),
    },
  },
});
```

--------------------------------

### Retrieve Root Permissions in PuckApi

Source: https://puckeditor.com/docs/api-reference/puck-api

Get permissions for the root component by setting the root parameter to true. This retrieves permissions as configured in the permissions parameter for the root level.

```javascript
getPermissions({ root: true });
// { delete: false }
```

--------------------------------

### Puck Slot Allowing Specific Components

Source: https://puckeditor.com/docs/integrating-puck/multi-column-layouts

Restricts the components that can be dropped into a slot by using the 'allow' parameter. In this example, only components with the name 'Card' are permitted in the 'content' slot.

```javascript
const config = {
  components: {
    fields: {
      content: {
        type: "slot",
        allow: ["Card"],
      },
    },
    Example: {
      render: ({ content: Content }) => {
        return <Content />;
      },
    },
  },
};

```

--------------------------------

### usePuck Selector Best Practices

Source: https://puckeditor.com/docs/api-reference/functions/use-puck

Provides examples of optimal and problematic selector patterns when using usePuck. Good selectors are granular and return consistent references, while bad selectors cause unnecessary re-renders by returning new object references or fetching entire state objects.

```typescript
// Good: only re-render when the `selectedItem` changes
const selectedItem = usePuck((s) => s.selectedItem);

// Bad: re-render when anything changes
const { selectedItem } = usePuck();
const { selectedItem } = usePuck((s) => s);

// Bad: selector creates a new object reference, causing an infinite comparison loop
const { selectedItem } = usePuck((s) => ({ ...s.selectedItem }));
```

--------------------------------

### Apply Prop Transforms to Puck Editor and Renderer

Source: https://puckeditor.com/docs/integrating-puck/data-migration

Shows how to integrate `transformProps` with Puck's `Puck` editor and `Render` components. This ensures that data payloads are transformed before being used by the editor or when rendering the final content, handling prop migrations on load or render.

```javascript
import { Puck, Render, transformProps } from "@measured/puck";

const transforms = {
  HeadingBlock: ({ title, ...props }) => ({ heading: title, ...props }),
};

export const MyEditor = ({ data, config }) => (
  <Puck data={transformProps(data, transforms)} config={config} />
);

export const MyPage = ({ data, config }) => (
  <Render data={transformProps(data, transforms)} config={config} />
);
```

--------------------------------

### Puck Editor: Customizing UI with Overrides

Source: https://puckeditor.com/docs/api-reference/components/puck

The `overrides` prop allows for customization of various UI elements within the Puck editor. This example shows how to override the default header component.

```javascript
export function Editor() {
  return (
    <Puck
      overrides={{
        header: () => <div />,
      }}
      // ...
    />
  );
}
```

--------------------------------

### Puck Editor Configuration with Components

Source: https://puckeditor.com/docs/api-reference/components/puck

Shows how to configure the Puck editor by defining custom components. This example illustrates setting up a 'HeadingBlock' component with a 'text' field, specifying its type and rendering logic. This allows for custom content blocks within the editor.

```javascript
export function Editor() {
  return (
    <Puck
      config={{
        components: {
          HeadingBlock: {
            fields: {
              children: {
                type: "text",
              },
            },
            render: ({ children }) => {
              return <h1>{children}</h1>;
            },
          },
        },
      }}
      // ...
    />
  );
}
```

--------------------------------

### Define Component Render Function with TypeScript in Puck Config

Source: https://puckeditor.com/docs/integrating-puck/component-configuration

This example demonstrates how to define a component's render function using TypeScript for stricter type safety. It imports the necessary 'Config' type and defines the structure of available components.

```typescript
import type { Config } from "@measured/puck";

type Components = {
  HeadingBlock: {};
};

const config: Config<Components> = {
  components: {
    HeadingBlock: {
      render: () => {
        return <h1>Hello, world</h1>;
      },
    },
  },
};
```

--------------------------------

### Puck Editor Iframe Configuration

Source: https://puckeditor.com/docs/api-reference/components/puck

Shows how to configure the iframe behavior for the Puck editor preview using the `iframe` prop. This example demonstrates disabling the iframe and deferring style loading. Disabling iframes also disables viewports.

```javascript
export function Editor() {
  return (
    <Puck
      iframe={{ enabled: false }}
      // ...
    />
  );
}
```

--------------------------------

### Custom Editor Layout with Puck Composition (React)

Source: https://puckeditor.com/docs/extending-puck/composition

Demonstrates how to create a custom editor layout by providing children to the `<Puck>` component. This example structures the editor into a preview pane and a component list pane using React and JSX.

```jsx
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck>
      <div
        style={{ display: "grid", gridTemplateColumns: "1fr 2fr", gridGap: 16 }}
      >
        <div>
          {/* Render the drag-and-drop preview */}
          <Puck.Preview />
        </div>
        <div>
          {/* Render the component list */}
          <Puck.Components />
        </div>
      </div>
    </Puck>
  );
}
```

--------------------------------

### Puck Editor: Using Metadata

Source: https://puckeditor.com/docs/api-reference/components/puck

The `metadata` prop provides additional data accessible within component render and resolveData functions. This example demonstrates passing a title to be displayed in a HeadingBlock component.

```javascript
export function Editor() {
  return (
    <Puck
      metadata={{ title: "Hello, world" }}
      config={{
        HeadingBlock: {
          render: ({ puck }) => {
            return <h1>{puck.metadata.title}</h1>; // "Hello, world"
          },
        },
      }}
      // ...
    />
  );
}
```

--------------------------------

### Define a Tool with Puck AI Cloud Client

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/tool

Create a tool that the AI agent can execute on your server. The tool requires a description for agent understanding, a Zod object schema for input validation, and an async execute function that processes the validated parameters. This example demonstrates a weather lookup tool with longitude and latitude coordinates.

```TypeScript
import { tool } from "@puckeditor/cloud-client";

const myTool = tool({
  description: "Get the weather for a set of coordinates",
  inputSchema: z.object({
    longitude: z.number(),
    latitude: z.number(),
  }),
  execute: async ({ longitude, latitude }) => {
    return getWeather({ longitude, latitude }); // Query your database
  },
});
```

--------------------------------

### ComponentData with Read-Only Properties

Source: https://puckeditor.com/docs/api-reference/data-model/component-data

This example shows a ComponentData object with an additional 'readOnly' field, specifying which properties are not editable. This is useful for managing component states.

```json
{
  "type": "HeadingBlock",
  "props": {
    "id": "HeadingBlock-1234",
    "title": "Hello, world"
  },
  "readOnly": {
    "title": true
  }
}
```

--------------------------------

### Set AI Context for Chat Stream with Puck Cloud Client

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/chat

Configures the AI's system context and instructions for the chat stream. This allows for guiding the AI's behavior and defining its persona or task focus.

```typescript
import { chat } from "@puckeditor/cloud-client";

export async function POST(request) {
  const body = await request.json();

  return chat(body, {
    ai: {
      context: "We are Google. Your job is to create Google landing pages.",
    },
  });
}
```

--------------------------------

### Custom Migration of Dynamic Zones

Source: https://puckeditor.com/docs/api-reference/functions/migrate

The `migrate` function allows custom migration logic for dynamic zones using the `migrateDynamicZonesForComponent` option within `migrationOptions`. This enables specialized transformations for specific components, such as the `Columns` component example provided.

```javascript
migrate(legacyData, config, {
  migrateDynamicZonesForComponent: {
    Columns: (props, zones) => {
      return {
        ...props,
        columns: Object.values(zones).map((zone) => ({
          column: zone,
        })),
      };
    },
  },
});
```

--------------------------------

### Backwards-Compatible Prop Handling in Puck Components

Source: https://puckeditor.com/docs/integrating-puck/data-migration

Illustrates a simple method to maintain backward compatibility for component props in Puck. By using logical OR (`||`) for fallback, components can accept either a new or an old prop name, preventing rendering errors during prop migrations.

```javascript
const config = {
  HeadingBlock: ({ title, heading }) => <h1>{heading || title}</h1>,
};
```

--------------------------------

### Provide Input Schema for Tool Arguments (JavaScript)

Source: https://puckeditor.com/docs/ai/tools

Illustrates how to define an input schema for a tool using Zod, specifying the arguments the AI can provide to the tool's execute function. This example uses `z.enum` to restrict the `category` argument to 'consumer' or 'business'.

```javascript
import { tool } from "@puckeditor/cloud-client";
import z from "zod/v4";
 
const products = {
  consumer: [
    { code: "google_maps", title: "Google Maps" },
    { code: "google_calendar", title: "Google Calendar" },
  ],
  business: [
    { code: "google_workspace", title: "Google Workspace" },
    { code: "google_cloud", title: "Google Cloud" },
  ],
};
 
const getProducts = tool({
  description: "Get a list of products",
  inputSchema: z.object({
    category: z.enum(["consumer", "business"])), // The agent will respect the enum
  }),
  execute: ({ category }) => products[category],
});
```

--------------------------------

### Retrieve Component Instance Permissions in PuckApi

Source: https://puckeditor.com/docs/api-reference/puck-api

Get resolved permissions for a specific component instance by passing an item object. This resolves dynamic permissions as configured in the resolvePermissions parameter and should be wrapped in useEffect.

```javascript
getPermissions({
  item: { type: "HeadingBlock", props: { id: "Heading-1234" } }, // Get resolved permissions for Heading-1234
});
// { delete: false }
```

--------------------------------

### Overriding UI in Puck Plugin

Source: https://puckeditor.com/docs/extending-puck/plugins

Illustrates how to use `overrides` in a Puck plugin to customize the user interface. This example targets `drawerItem` components, changing their text color to hotpink. It also explains the concept of curried overrides.

```javascript
const plugin = {
  overrides: {
    // Make all drawer items pink
    drawerItem: ({ name }) => <div style={{ color: "hotpink" }}>{name}</div>,
  },
};
```

--------------------------------

### Render Radio Input with Options (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/radio

This example demonstrates how to configure a 'radio' input field within a component's configuration. It specifies the field type as 'radio' and provides an array of option objects, each with a label and a value. The 'defaultProps' and 'render' functions show how to set a default selection and display content based on the selected radio option.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        textAlign: {
          type: "radio",
          options: [
            { label: "Left", value: "left" },
            { label: "Right", value: "right" },
          ],
        },
      },
      defaultProps: {
        textAlign: "left",
      },
      render: ({ textAlign }) => {
        return <p style={{ textAlign }}>Hello, world</p>;
      },
    },
  },
};
```

--------------------------------

### Retrieve Component Type Permissions in PuckApi

Source: https://puckeditor.com/docs/api-reference/puck-api

Get permissions for a specific component type by passing the type parameter. This retrieves permissions as configured in the permissions parameter for all instances of that component type.

```javascript
getPermissions({ type: "HeadingBlock" });
// { delete: false }
```

--------------------------------

### Triggering resolveData with resolveAllData Utility in JavaScript

Source: https://puckeditor.com/docs/integrating-puck/dynamic-props

Provides an example of how to manually trigger the data resolution process for all components using the `resolveAllData` utility function. This is useful for ensuring that all dynamic props are up-to-date after a data mutation or when initializing the application state.

```javascript
import { resolveAllData } from "@measured/puck";
 
const updatedData = await resolveAllData(data, config);
```

--------------------------------

### Configure AI for HeadingBlock Title Field (JavaScript)

Source: https://puckeditor.com/docs/api-reference/ai/configuration/fields

This example demonstrates how to configure AI behavior for the 'title' field of a 'HeadingBlock' component. It sets an instruction to always use uppercase for the title.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "text",
          ai: {
            instructions: "Always use caps",
          },
        },
      },
      render: ({ title }) => <h1>{title}</h1>,
    },
  },
};

```

--------------------------------

### Distribute Field Transforms as Plugins in React

Source: https://puckeditor.com/docs/extending-puck/field-transforms

Package field transforms and field type overrides together as a plugin for distribution. This example combines transforms with overrides to provide both custom rendering and field interface definitions.

```jsx
const plugin = {
  fieldTransforms: {
    example: ({ value }) => <div>{value}</div>, // Wrap all example fields with divs
  },
 
  // This example combines transforms with overrides
  overrides: {
    fieldTypes: {
      example: () => <input />, // Define a field interface
    },
  },
};
 
const Example = () => <Puck plugins={[plugin]} />;
```

--------------------------------

### Add Fields to Puck Root Configuration

Source: https://puckeditor.com/docs/integrating-puck/root-configuration

This example shows how to add custom fields to the Puck root configuration, allowing users to input metadata like title and description. These fields are accessible within the root's render function and can be used to dynamically generate content. Custom fields override default configurations.

```javascript
const config = {
  // ...
  root: {
    fields: {
      title: { type: "text" }, // You need to redefine the `title` field if we want to retain it
      description: { type: "textarea" },
    },
    render: ({ children, title, description }) => {
      return (
        <div>
          <h1>{title}</h1>
          <p>{description}</p>
          {children}
        </div>
      );
    },
  },
};
```

--------------------------------

### Using Metadata with <Render>

Source: https://puckeditor.com/docs/api-reference/components/render

This example demonstrates passing 'metadata' to the <Render> component and accessing it within a component's render function. The 'metadata' object can contain arbitrary data, such as titles, accessible via 'puck.metadata'.

```jsx
export function Example() {
  return (
    <Render
      metadata={{ title: "Hello, world" }}
      config={{
        HeadingBlock: {
          render: ({ puck }) => {
            return <h1>{puck.metadata.title}</h1>; // "Hello, world"
          },
        },
      }}
      // ...
    />
  );
}
```

--------------------------------

### Implement Prop Migration with Puck's transformProps

Source: https://puckeditor.com/docs/integrating-puck/data-migration

Demonstrates using the `transformProps` utility from `@measured/puck` to update component props within a data payload. This is useful for renaming or removing props, ensuring backward compatibility or transforming data for rendering.

```javascript
import { transformProps } from "@measured/puck";

const config = {
  // Renamed `title` prop to `heading`
  HeadingBlock: ({ heading }) => <h1>{heading}</h1>,
};

const data = {
  content: [
    // HeadingBlock references the legacy `title` prop
    { type: "HeadingBlock", props: { title: "Hello, world" } },
  ],
};

const updatedData = transformProps(data, {
  // Map `heading` to the legacy `title` prop
  HeadingBlock: ({ title, ...props }) => ({ heading: title, ...props }),
});

console.log(updatedData);
// { content: [{ type: "HeadingBlock", props: { heading: "Hello, world" } }] };
```

--------------------------------

### Get Component Selector by ID in PuckApi

Source: https://puckeditor.com/docs/api-reference/puck-api

Retrieve an item's selector (index and zone) by its component ID. This converts a component ID into its corresponding position within the page structure.

```javascript
getSelectorForId("HeadingBlock-123");
// { index: 0, zone: "Flex-123:children" }
```

--------------------------------

### Set Field Metadata in Puck Editor (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/base

This example illustrates how to attach arbitrary metadata to a field using the 'metadata' parameter. This can be used for storing additional information related to the field's configuration or behavior.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          metadata: {
            title: "Hello, world",
          },
          // ...
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Configure Field Label in Puck Editor (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/base

This example demonstrates how to set a custom label for a field using the 'label' parameter within the Puck Editor configuration. The label is a string that appears next to the input.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          label: "My Field",
          // ...
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Define FieldTransforms in JavaScript

Source: https://puckeditor.com/docs/api-reference/field-transforms

This snippet demonstrates how to define field transforms for custom rendering of field values in Puck editor. It includes a basic example for the 'text' field type and implies extensibility for other types.

```javascript
const fieldTransforms = {
  text: ({ value }) => <p>{value}</p>,
  // ...
};
```

--------------------------------

### Puck Editor Drag and Drop Configuration

Source: https://puckeditor.com/docs/api-reference/components/puck

Shows how to configure drag-and-drop behavior for the Puck editor using the `dnd` prop. This example specifically demonstrates disabling the auto-scroll feature when dragging items near the edge of the preview area.

```javascript
export function Editor() {
  return (
    <Puck
      dnd={{
        disableAutoScroll: true,
      }}
      // ...
    />
  );
}
```

--------------------------------

### Mark HeadingBlock Title Field as Required for AI (JavaScript)

Source: https://puckeditor.com/docs/api-reference/ai/configuration/fields

This example illustrates how to explicitly mark the 'title' field of a 'HeadingBlock' component as required for AI generation by setting the 'required' parameter to true.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "text",
          ai: {
            required: true,
          },
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Define Component Props with TypeScript for Fields in Puck

Source: https://puckeditor.com/docs/integrating-puck/component-configuration

This TypeScript example shows how to define the expected props for a component ('HeadingBlock') when using fields. This enables strict type checking for the data entered into the fields via the Puck editor.

```typescript
import type { Config } from "@measured/puck";

type Components = {
  HeadingBlock: {
    title: string;
  };
};

const config: Config<Components> = {
  // ...
};
```

--------------------------------

### Retrieve Component Data by ID in PuckApi

Source: https://puckeditor.com/docs/api-reference/puck-api

Get an item's ComponentData by its unique component ID. This function provides direct access to component properties and metadata using only the component identifier.

```javascript
getItemById("HeadingBlock-123");
// { type: "HeadingBlock", props: {} }
```

--------------------------------

### Basic Text Field Transform in React

Source: https://puckeditor.com/docs/extending-puck/field-transforms

Create a simple field transform that wraps all text field props in div elements. This example demonstrates the basic syntax for defining a fieldTransforms object and passing it to the Puck component.

```jsx
const fieldTransforms = {
  text: ({ value }) => <div>Value: {value}</div>, // Wrap all text field props in divs
};
 
const Example = () => <Puck fieldTransforms={fieldTransforms} />;
```

--------------------------------

### Transforming Fields in Puck Plugin

Source: https://puckeditor.com/docs/extending-puck/plugins

Shows how to use `fieldTransforms` within a Puck plugin to modify the data of specific field types before they are rendered in the editor preview. This example targets the 'text' field type.

```javascript
const plugin = {
  fieldTransforms: {
    // Make all props powered by "text" field pink in the editor
    text: ({ value }) => <span style={{ color: "hotpink" }}>{value}</span>,
  },
};
```

--------------------------------

### Retrieve Global Permissions with PuckApi getPermissions

Source: https://puckeditor.com/docs/api-reference/puck-api

Get global permissions for the Puck editor instance without parameters. Returns an object with boolean properties indicating allowed actions like delete and edit at the application level.

```javascript
getPermissions();
// { delete: true, edit: true }
```

--------------------------------

### Exclude Fields from AI Generation

Source: https://puckeditor.com/docs/ai/ai-configuration

This example shows how to exclude a field from AI page generation using the 'exclude' parameter. Setting 'exclude' to 'true' within the 'ai' configuration prevents the field from being considered by the agent.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        src: {
          type: "text",
          ai: {
            exclude: true,
          },
        },
      },
      render: ({ src }) => <img src={src} />,
    },
  },
};
```

--------------------------------

### Customize Puck.Fields with wrapFields=false

Source: https://puckeditor.com/docs/api-reference/components/puck-fields

This example shows how to customize the Puck.Fields component using the 'wrapFields' prop. Setting 'wrapFields' to false disables the default padding and border that separates the top-level fields. This allows for a more compact field layout when needed.

```jsx
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck>
      <Puck.Fields wrapFields={false} />
    </Puck>
  );
}
```

--------------------------------

### Render Draggable Components with Puck.Components (React)

Source: https://puckeditor.com/docs/api-reference/components/puck-components

This snippet demonstrates how to use the Puck.Components component within a React application to render a draggable list of components. It requires the `@measured/puck` library and assumes a basic Puck editor setup.

```javascript
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck>
      <Puck.Components />
    </Puck>
  );
}
```

--------------------------------

### Render Page Data as JSON using Puck Internal API and Composition

Source: https://puckeditor.com/docs/extending-puck/internal-puck-api

This example demonstrates how to use the internal Puck API (`usePuck` hook) within a composed component to render the page data as a JSON string. It requires importing `Puck` and `createUsePuck` from `@measured/puck`. The `JSONRenderer` component accesses `appState` and stringifies its `data` property.

```javascript
import { Puck, createUsePuck } from "@measured/puck";

const usePuck = createUsePuck();

const JSONRenderer = () => {
  const appState = usePuck((s) => s.appState);

  return <div>{JSON.stringify(appState.data)}</div>;
};

export function Editor() {
  return (
    <Puck>
      <JSONRenderer />
    </Puck>
  );
}
```

--------------------------------

### Selecting External Data with 'external' Field Type

Source: https://puckeditor.com/docs/integrating-puck/external-data-sources

This example demonstrates how to use the 'external' field type to allow users to select tabular data from a third-party source. The `fetchList` function queries an API to retrieve a list of items, which are then displayed by the component. The component renders the selected data's title and description.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async () => {
            // Query an API for a list of items
            const items = await fetch(`/api/items`).then((res) => res.json());
            // [
            //   { title: "Hello, world", description: "Lorem ipsum 1" },
            //   { title: "Goodbye, world", description: "Lorem ipsum 2" },
            // ];
 
            return items;
          },
        },
      },
      render: ({ data }) => {
        if (!data) {
          return "No data selected";
        }
 
        return (
          <>
            <b>{data.title}</b>
            <p>{data.description}</p>
          </>
        );
      },
    },
  },
};
```

--------------------------------

### Render Select Input with Options - JavaScript

Source: https://puckeditor.com/docs/api-reference/fields/select

Demonstrates how to define a 'select' input field within the Puck Editor configuration. This field allows users to choose from a predefined list of options, each with a label and a corresponding value. The example shows the structure for defining field types and options.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        textAlign: {
          type: "select",
          options: [
            { label: "Left", value: "left" },
            { label: "Right", value: "right" },
          ],
        },
      },
      render: ({ textAlign }) => {
        return <p style={{ textAlign }}>Hello, world</p>;
      },
    },
  },
};
```

--------------------------------

### Puck Editor Field Transforms for Text Fields

Source: https://puckeditor.com/docs/api-reference/components/puck

Illustrates the use of `fieldTransforms` to modify how field values are processed and displayed in the Puck editor. This example wraps all text field values in a `<div>` element, demonstrating customization of field rendering.

```javascript
export function Editor() {
  return (
    <Puck
      fieldTransforms={{
        text: ({ value }) => <div>{value}</div>, // Wrap all text field values in a div
      }}
      // ...
    />
  );
}
```

--------------------------------

### Retrieve Component Data by Selector in PuckApi

Source: https://puckeditor.com/docs/api-reference/puck-api

Get an item's ComponentData by its selector, which includes an index and zone reference. The zone parameter references the slot field in a component using the format 'component-id:slot-name'.

```javascript
getItemBySelector({
  index: 0,
  zone: "Flex-123:children", // The "children" slot field in the component with id "Flex-123"
});
// { type: "HeadingBlock", props: {} }
```

--------------------------------

### Define Custom Field Types with Transforms in React

Source: https://puckeditor.com/docs/extending-puck/field-transforms

Create a custom field type using field transforms. This allows you to define new field types (e.g., 'example') with custom rendering behavior in the Puck editor.

```jsx
const fieldTransforms = {
  example: () => <div />,
};
```

--------------------------------

### Custom Field Configuration with Required Params (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/custom

This example focuses on the essential parameters for a custom field in Puck Editor. It highlights the 'type' property, which must be set to 'custom', and the 'render' function, which is responsible for rendering the custom UI element for the field.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "custom",
          render: ({ name, onChange, value }) => (
            <input
              defaultValue={value}
              name={name}
              onChange={(e) => onChange(e.currentTarget.value)}
            />
          ),
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Create Puck AI Plugin

Source: https://puckeditor.com/docs/api-reference/ai/ai-plugin/create-ai-plugin

This snippet demonstrates how to import and initialize the AI plugin for Puck editor. It requires the `@puckeditor/plugin-ai` package and its associated styles. The created plugin is then passed to the Puck component's `plugins` prop.

```javascript
import { createAiPlugin } from "@puckeditor/plugin-ai";
import "@puckeditor/plugin-ai/styles.css";

const aiPlugin = createAiPlugin();

export function Editor() {
  return (
    <Puck
      plugins={[aiPlugin]}
      // ...
    />
  );
}
```

--------------------------------

### Rendering Puck Config in Next.js App Router Page

Source: https://puckeditor.com/docs/integrating-puck/server-components

This code snippet shows how to render a Puck configuration within a Next.js application router page, which is a React Server Component. It includes an example of using `resolveAllData` on the server-side before passing the data and configuration to the `<Render>` component.

```javascript
import { config } from "../puck.config.tsx";
import { Render, resolveAllData } from "@measured/puck";

// Assume getData is a server function that fetches data
async function getData() {
  // Replace with your actual data fetching logic
  return { someKey: "someValue" }; 
}

export default async function Page() {
  const data = await getData(); // Some server function

  const resolvedData = await resolveAllData(data, config); // Optional call to resolveAllData, if this needs to run server-side

  return <Render data={resolvedData} config={config} />;
}
```

--------------------------------

### Configure Text Field in Puck Component

Source: https://puckeditor.com/docs/api-reference/fields/text

Basic setup for a text field component in Puck Editor configuration. Demonstrates how to define a text field with type declaration and render function that displays the text content as a paragraph element.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "text",
        },
      },
      render: ({ title }) => {
        return <p>{title}</p>;
      },
    },
  },
};
```

--------------------------------

### Render Object with Fields (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/object

This example demonstrates how to define an object field within Puck Editor's configuration. It specifies the 'object' type and defines nested fields like 'title' using 'objectFields'. The 'render' function then uses these parameters to display content.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        params: {
          type: "object",
          objectFields: {
            title: { type: "text" },
          },
        },
      },
      render: ({ params }) => {
        return <p>{params.title}</p>;
      },
    },
  },
};

```

--------------------------------

### Update an Existing Puck Page Programmatically with JavaScript

Source: https://puckeditor.com/docs/ai/headless-generation

Shows how to update an existing Puck page by providing the current `pageData` to the `generate()` API along with a prompt for modifications. This allows for iterative changes to previously generated or authored pages. The example demonstrates replacing specific text content.

```javascript
import { generate } from "@puckeditor/cloud-client";

const page = await generate({
  prompt: "Replace all mentions of Dog with Cat",
  config: {
    components: {
      HeadingBlock: {
        fields: {
          title: { type: "text" },
        },
        render: ({ title }) => title,
      },
    },
  },
  pageData: {
    root: { props: { title: "Dogs: Man's Best Friend" } },
    content: [],
  },
});
// { root: { props: { title: "Cats: Man's Best Friend" } }, content: [] }
```

--------------------------------

### Customize Drawer.Item rendering in Puck Editor (React)

Source: https://puckeditor.com/docs/api-reference/components/drawer-item

This example shows how to customize the rendering of a Drawer.Item using a render prop. It allows for custom content, like adding an emoji, to be displayed for the draggable item. This enhances the visual representation of the draggable elements.

```jsx
import { Puck, Drawer } from "@measured/puck";

export function Editor() {
  return (
    <Puck>
      <Drawer>
        <Drawer.Item name="Orange">{() => <div>Orange </div>}</Drawer.Item>
      </Drawer>
    </Puck>
  );
}
```

--------------------------------

### Puck AI Array Field: Required Type Parameter

Source: https://puckeditor.com/docs/api-reference/fields/array

Demonstrates the mandatory 'type' parameter for array fields in Puck AI. This example shows how to specify that a field should be an array, which is crucial for its correct rendering and behavior. The 'arrayFields' parameter is also shown as required.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Set Component-Level Permissions in Config

Source: https://puckeditor.com/docs/integrating-puck/feature-toggling

Apply permissions to all instances of a specific component type using the permissions parameter in the component config. Component permissions inherit and override global permissions. This example disables deletion for all HeadingBlock instances.

```javascript
const config = {
  components: {
    HeadingBlock: {
      permissions: {
        delete: false, // Disable delete function on all HeadingBlock instances
      },
      // ...
    },
  },
};
```

--------------------------------

### Dynamic Component Props with resolveData in JavaScript

Source: https://puckeditor.com/docs/integrating-puck/dynamic-props

Demonstrates how to use the `resolveData` function within a component's configuration to dynamically set props. This example maps the 'title' prop to a new 'resolvedTitle' prop, which is then used in the component's render function. It highlights the asynchronous nature of `resolveData` and its ability to modify component props based on initial values.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "text",
        },
        resolvedTitle: {
          type: "text",
        },
      },
      resolveData: async ({ props }) => {
        return {
          props: {
            resolvedTitle: props.title,
          },
        };
      },
      render: ({ resolvedTitle }) => {
        return <h1>{resolvedTitle}</h1>;
      },
    },
  },
};
```

--------------------------------

### Hybrid Authoring: Inline Editing and External Data Mapping

Source: https://puckeditor.com/docs/integrating-puck/external-data-sources

This example shows how to implement hybrid authoring, allowing users to edit fields directly or populate them from an external source. It maps data from an external source (e.g., `data.title`) to an editable field (e.g., `title`) and marks it as read-only when external data is present. The `resolveData` function manages this mapping and read-only state, reverting to editable when no external data is selected.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          // ...
        },
        title: {
          type: "text",
        },
      },
      resolveData: async ({ props }, { changed }) => {
        // Remove read-only from the title field if `data` is empty
        if (!props.data) return { props, readOnly: { title: false } };
 
        // Don't query unless `data` has changed since resolveData was last run
        if (!changed.data) return { props };
 
        return {
          props: {
            title: props.data.title,
            readOnly: { title: true },
          },
        };
      },
      render: ({ title }) => <b>{title}</b>,
    },
  },
};

```

--------------------------------

### Dynamically Set Component Permissions in JavaScript

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

The `resolvePermissions` function enables dynamic control over component permissions. It takes `data` and `params` as arguments, where `params` includes `permissions`. The example shows how to disable deletion for a specific component ID while falling back to inherited permissions for others.

```javascript
const config = {
  components: {
    MyComponent: {
      resolvePermissions: (data, { permissions }) => {
        if (data.props.id === "MyComponent-1234") {
          return {
            delete: false, // Disable deletion on component with id MyComponent-1234
          };
        }
 
        return { permissions }; // Fallback to inherited permissions
      },
      // ...
    },
  },
};
```

--------------------------------

### Disable AI Field Streaming

Source: https://puckeditor.com/docs/ai/ai-configuration

This example shows how to disable the streaming of field values for AI. Setting 'stream' to 'false' in the 'ai' configuration prevents fragmented rendering and potential issues like broken image URLs.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        src: {
          type: "text",
          ai: {
            stream: false,
          },
        },
      },
      render: ({ src }) => <img src={src} />,
    },
  },
};
```

--------------------------------

### Create Basic Puck Config with Components

Source: https://puckeditor.com/docs/api-reference/configuration/config

Demonstrates how to create a basic Puck configuration object with a HeadingBlock component. The config requires a components object containing component definitions that implement the ComponentConfig API, each with fields and a render function.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        children: {
          type: "text",
        },
      },
      render: ({ children }) => {
        return <h1>{children}</h1>;
      },
    },
  },
};
```

--------------------------------

### Set Global Permissions on Puck Component

Source: https://puckeditor.com/docs/integrating-puck/feature-toggling

Configure global permissions that apply across the entire Puck instance using the permissions prop. This example disables the delete function for all components. Global permissions serve as the default for all component instances.

```jsx
export function Editor() {
  return (
    <Puck
      permissions={{
        delete: false, // Disable delete function on all components
      }}
      // ...
    />
  );
}
```

--------------------------------

### Control Streaming for ImageBlock Source Field (JavaScript)

Source: https://puckeditor.com/docs/api-reference/ai/configuration/fields

This example shows how to control whether the AI-generated value for the 'src' field of an 'ImageBlock' component is streamed to the client. Setting 'stream' to false prevents premature streaming of image URLs.

```javascript
const config = {
  components: {
    ImageBlock: {
      fields: {
        src: {
          type: "text",
          ai: {
            stream: false, // Don't stream image URLs
          },
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Introduce New Custom Field Type - React/TypeScript

Source: https://puckeditor.com/docs/extending-puck/ui-overrides

Demonstrates how to define a new custom field type through the `fieldTypes` override. This example creates a `myField` type that can be exposed to Puck components. When using TypeScript, new field types must be extended using the `ConfigWithExtensions` type to maintain type safety.

```jsx
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck
      // ...
      overrides={{
        fieldTypes: {
          myField: ({ name, onChange, value }) => <div />,
        },
      }}
    />
  );
}
```

--------------------------------

### Render Puck ActionBar Component (React)

Source: https://puckeditor.com/docs/api-reference/components/action-bar

Renders the Puck ActionBar component, which is used for overriding the default action bar. It requires 'label' and 'children' props, where children typically include ActionBar.Group and ActionBar.Action components. The example demonstrates adding a clickable action with an icon.

```jsx
<ActionBar label="Actions">
  <ActionBar.Group>
    <ActionBar.Action onClick={() => console.log("Clicked!")}>
      
    </ActionBar.Action>
  </ActionBar.Group>
</ActionBar>
```

--------------------------------

### Create a Drawer.Item in Puck Editor (React)

Source: https://puckeditor.com/docs/api-reference/components/drawer-item

This snippet demonstrates how to import and use the Drawer.Item component within a Puck editor setup. It requires the Puck and Drawer components from '@measured/puck'. The primary function is to define a draggable item named 'Orange' within the Drawer.

```jsx
import { Puck, Drawer } from "@measured/puck";

export function Editor() {
  return (
    <Puck>
      <Drawer>
        <Drawer.Item name="Orange" />
      </Drawer>
    </Puck>
  );
}
```

--------------------------------

### Render ActionBar Label with Group - JSX

Source: https://puckeditor.com/docs/api-reference/components/action-bar-label

Demonstrates how to render ActionBar.Label components both standalone and within an ActionBar.Group container. The label prop accepts a string value to display as the label text. This example shows a label with another ActionBar.Label nested in a group alongside an ActionBar.Action component.

```jsx
<ActionBar>
  <ActionBar.Label label="Label 1" />
  <ActionBar.Group>
    <ActionBar.Label label="Label 2" />
    <ActionBar.Action></ActionBar.Action>
  </ActionBar.Group>
</ActionBar>
```

--------------------------------

### Set Placeholder Text for Empty External Field

Source: https://puckeditor.com/docs/api-reference/fields/external

Configure placeholder text to display when no item has been selected in the external field. This improves UX by guiding users on what action to take. The placeholder is replaced once a selection is made.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async () => {
            return [
              { title: "Apple", description: "Lorem ipsum 1" },
              { title: "Orange", description: "Lorem ipsum 2" }
            ];
          },
          placeholder: "Pick your favorite fruit"
        }
      }
    }
  }
};
```

--------------------------------

### Set Maximum Value for Number Input

Source: https://puckeditor.com/docs/api-reference/fields/number

This example shows how to set a maximum allowable value for a 'number' input field using the 'max' parameter. This is useful for enforcing data constraints on user input. The input will not accept values greater than the specified maximum.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        myNumber: {
          type: "number",
          max: 10,
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Tool Definition API

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/tool

Defines a function that an AI agent can execute on your server. It requires a description, an input schema, and an execute function.

```APIDOC
## POST /tool

### Description
This endpoint allows you to define a custom tool that an AI agent can execute. Tools enable agents to interact with your server-side logic or external services.

### Method
POST

### Endpoint
`/tool`

### Parameters
#### Request Body
- **description** (String) - Required - A description that the agent will use to understand how to use this tool.
- **inputSchema** (Zod Object) - Required - The shape of the parameters provided to the `execute()` function. Must be a zod object (`z.object()`).
- **execute** (Function) - Required - The execution function for the tool. Will receive parameters provided by the agent that match the `inputSchema`.
- **name** (String) - Optional - An optional name for the tool.

### Request Example
```json
{
  "tool": {
    "name": "getWeather",
    "description": "Get the weather for a set of coordinates",
    "inputSchema": {
      "type": "object",
      "properties": {
        "longitude": {"type": "number"},
        "latitude": {"type": "number"}
      },
      "required": ["longitude", "latitude"]
    },
    "execute": "async ({ longitude, latitude }) => { return getWeather({ longitude, latitude }); }"
  }
}
```

### Response
#### Success Response (200)
- **message** (String) - Confirmation message indicating the tool was defined successfully.

#### Response Example
```json
{
  "message": "Tool defined successfully."
}
```
```

--------------------------------

### Setting Fields as Read-Only with resolveData in JavaScript

Source: https://puckeditor.com/docs/integrating-puck/dynamic-props

Illustrates how to use the `resolveData` function to not only update props but also mark specific fields as read-only. In this example, 'resolvedTitle' is set to be read-only after its value is determined from the 'title' prop, preventing further user modification.

```javascript
const config = {
  components: {
    HeadingBlock: {
      // ...
      resolveData: async ({ props }) => {
        return {
          props: {
            resolvedTitle: props.title,
          },
          readOnly: { resolvedTitle: true },
        };
      },
      // ...
    },
  },
};
```

--------------------------------

### Render Puck Fields Internally with AutoField

Source: https://puckeditor.com/docs/extending-puck/custom-fields

Illustrates rendering Puck fields within a custom field using the `<AutoField>` component. This allows for nested field structures, and the example shows how to use it with a 'text' type field, passing 'value' and 'onChange' props.

```javascript
import { AutoField } from "@measured/puck";
 
const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "custom",
          label: "Label Example",
          render: ({ field, value, onChange }) => (
            <FieldLabel label={field.label}>
              <AutoField
                field={{ type: "text" }}
                onChange={(value) => onChange(value)}
                value={value}
              />
            </FieldLabel>
          ),
        },
        // ...
      },
    },
  },
};
```

--------------------------------

### Update UI State with onChange in Puck Editor

Source: https://puckeditor.com/docs/extending-puck/custom-fields

Demonstrates how to use the `onChange` function in a custom Puck Editor field to update both the field's value and the Puck UI state simultaneously. This example closes the left sidebar when the custom field is changed.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "custom",
          render: ({ name, onChange, value }) => (
            <input
              defaultValue={value}
              name={name}
              onChange={(e) =>
                onChange(
                  e.currentTarget.value,
                  // Close the left side bar when this field is changed
                  { leftSideBarVisible: false }
                )
              }
              style={{ border: "1px solid black", padding: 4 }}
            />
          ),
        },
      },
      render: ({ title }) => {
        return <p>{title}</p>;
      },
    },
  },
};
```

--------------------------------

### Control Viewport Size with CSS Transforms in Puck

Source: https://puckeditor.com/docs/integrating-puck/viewports

Illustrates how to control the viewport size within a compositional interface in Puck without using the `viewports` API. The example uses a `div` with CSS `transform: scale()` and a fixed `width` to zoom the `Puck.Preview` component, effectively changing its apparent size.

```javascript
import React from "react";
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck>
      <div style={{ transform: "scale(0.5)", width: 1280 }}>
        <Puck.Preview />
      </div>
    </Puck>
  );
}
```

--------------------------------

### Resolve Permissions Dynamically Based on Component Data

Source: https://puckeditor.com/docs/integrating-puck/feature-toggling

Enable runtime permission calculation using resolvePermissions to implement instance-specific permissions based on component data. This example conditionally disables deletion when a component has a locked property set to true, otherwise inheriting parent permissions.

```javascript
const config = {
  components: {
    HeadingBlock: {
      resolvePermissions: (data, { permissions }) => {
        if (data.props.locked) {
          return {
            delete: false, // Disable delete function when HeadingBlock `locked` prop is set
          };
        }
 
        return permissions; // Return inherited permissions (component or global)
      },
      // ...
    },
  },
};
```

--------------------------------

### Create Custom Publish Button in Header - React/TypeScript

Source: https://puckeditor.com/docs/extending-puck/ui-overrides

Illustrates how to override the header actions using the `headerActions` override and the internal Puck API via `createUsePuck()`. This example replaces the default publish button with a custom save button that accesses the application state and triggers a save function. The default header actions can be optionally rendered through the children parameter.

```jsx
import { Puck, createUsePuck } from "@measured/puck";

const usePuck = createUsePuck();

const save = () => {};

export function Editor() {
  return (
    <Puck
      // ...
      overrides={{
        headerActions: ({ children }) => {
          const appState = usePuck((s) => s.appState);

          return (
            <>
              <button
                onClick={() => {
                  save(appState.data);
                }}
              >
                Save
              </button>

              {/* Render default header actions, such as the default Button */}
              {/*{children}*/}
            </>
          );
        },
      }}
    />
  );
}
```

--------------------------------

### Set Stepping Interval for Number Input

Source: https://puckeditor.com/docs/api-reference/fields/number

This example shows how to configure the stepping interval for a 'number' input field using the 'step' parameter. This controls the increment or decrement value when the user interacts with the input's stepper controls. A step of 0.1 allows for decimal increments.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        myNumber: {
          type: "number",
          step: 0.1,
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Resolve Fields Asynchronously with API Calls

Source: https://puckeditor.com/docs/integrating-puck/dynamic-fields

The resolveFields function supports asynchronous operations to populate field options dynamically from API calls. This example fetches options for a select field based on a radio field selection, using the changed parameter to optimize API calls and avoid unnecessary requests when unrelated fields change.

```JavaScript
const config = {
  components: {
    MyComponent: {
      resolveFields: async (data, { changed, lastFields }) => {
        // Don't call the API unless `category` has changed
        if (!changed.category) return lastFields;
 
        // Make an asynchronous API call to get the options
        const options = await getOptions(data.category);
 
        return {
          category: {
            type: "radio",
            options: [
              { label: "Fruit", value: "fruit" },
              { label: "Vegetables", value: "vegetables" },
            ],
          },
          item: {
            type: "select",
            options,
          },
        };
      },
      render: ({ item }) => <h1>{item}</h1>,
    },
  },
};
```

--------------------------------

### Puck AI Array Field: Optional Max Parameter

Source: https://puckeditor.com/docs/api-reference/fields/array

Illustrates the optional 'max' parameter to enforce a maximum limit on the number of items in an array field. This is useful for controlling the size of lists and preventing excessive data entry. The example sets a maximum of 3 items.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
          max: 3,
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Basic <Render> Component Usage

Source: https://puckeditor.com/docs/api-reference/components/render

This snippet demonstrates the fundamental usage of the <Render> component. It takes 'config' and 'data' as required props to render content. The 'config' object defines available components, while 'data' provides the content structure.

```jsx
import { Render } from "@measured/puck";

export function Example() {
  return <Render config={config} data={data} />;
}
```

--------------------------------

### Loading a Puck Plugin

Source: https://puckeditor.com/docs/extending-puck/plugins

Demonstrates how to load a custom Puck plugin by passing it to the `plugins` prop of the `<Puck>` component. This integrates the plugin's functionality into the Puck editor.

```javascript
import { Puck } from "@measured/puck";
import myPlugin from "my-puck-plugin";

export function Editor() {
  return (
    <Puck
      // ...
      plugins={[myPlugin]}
    />
  );
}
```

--------------------------------

### Puck AI Array Field: Optional DefaultItemProps

Source: https://puckeditor.com/docs/api-reference/fields/array

Shows how to use the optional 'defaultItemProps' parameter to set default values for new items added to an array field. This is useful for pre-populating fields or ensuring consistency when users add new array elements. The example sets a default title.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
          defaultItemProps: {
            title: "Hello, world",
          },
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Generate a Puck Page Programmatically with JavaScript

Source: https://puckeditor.com/docs/ai/headless-generation

Demonstrates how to generate a new Puck page using the `generate()` API with a natural-language prompt and component configuration. The output is Puck `Data` that can be used for rendering or further modification. Execution time depends on prompt complexity.

```javascript
import { generate } from "@puckeditor/cloud-client";

const page = await generate({
  prompt: "Create a page about dogs",
  config: {
    components: {
      HeadingBlock: {
        fields: {
          title: { type: "text" },
        },
        render: ({ title }) => title,
      },
    },
  },
});
// { root: { props: { title: "Pawesome Friends" } }, content: [ { type: "HeadingBlock", props: { id: "Heading-12345", title: "Discover Man's Best Friend" } } ] }
```

--------------------------------

### Puck Handler Initialization with AI Context

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/puck-handler

Initializes the puckHandler with AI-specific options, particularly setting the system context for the AI agent. This allows the AI to understand its role and generate content according to the provided instructions. The output is a handler function.

```javascript
const handler = puckHandler({
  ai: {
    context: "We are Google. You create Google landing pages.",
  },
});
```

--------------------------------

### Configure AI Plugin Chat OnSubmit Callback

Source: https://puckeditor.com/docs/api-reference/ai/ai-plugin/create-ai-plugin

This snippet illustrates how to set up the `chat.onSubmit` callback function. This function is invoked whenever a user submits a prompt through the chat interface, receiving the prompt text as an argument.

```javascript
const chatPlugin = chat({
  onSubmit: (prompt) => console.log(prompt),
});
```

--------------------------------

### Get Item Summary Label for Selected Item

Source: https://puckeditor.com/docs/api-reference/fields/external

Define a callback function getItemSummary that returns the display label shown after an item is selected. This function receives the selected item object and should return a string representation (e.g., item title or name) to display in the field.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async () => {
            return [
              { title: "Hello, world", description: "Lorem ipsum 1" },
              { title: "Goodbye, world", description: "Lorem ipsum 2" }
            ];
          },
          getItemSummary: (item) => item.title
        }
      }
    }
  }
};
```

--------------------------------

### Provide AI Plugin Context using puckHandler()

Source: https://puckeditor.com/docs/ai/business-context

Configure the AI plugin with business context by passing a string to the `context` parameter within the `ai` object of the `puckHandler()` function. This context helps the AI understand your business and build relevant pages.

```javascript
import { puckHandler } from "@puckeditor/cloud-client";

const handler = puckHandler({
  ai: {
    context: "We are Google. You create Google landing pages.",
  },
});
```

```javascript
import { puckHandler } from "@puckeditor/cloud-client";

const context = `## Overview
We are Google. You help us build Google landing pages.

## Brand guidelines

Our brand colors are:

- #4285F4 (primary)
- #DB4437
- #F4B400
- #0F9D58

## Tone of voice

- American English
- ...
`;

const handler = puckHandler({
  ai: {
    context,
  },
});
```

--------------------------------

### Configure Root Component Wrapper in Puck

Source: https://puckeditor.com/docs/api-reference/configuration/config

Shows how to define a root component that wraps the entire component tree in Puck. The root component receives children as a prop and must render the default content. It implements the ComponentConfig API.

```javascript
const config = {
  root: {
    render: ({ children }) => {
      return <div>{children}</div>;
    },
  },
};
```

--------------------------------

### transformProps - Rename Props in Puck Data

Source: https://puckeditor.com/docs/api-reference/functions/transform-props

Demonstrates how to use transformProps to rename component properties across a Data payload. The function takes a data object containing components and a transforms object with functions for each component type. In this example, the 'title' property is renamed to 'heading' in the HeadingBlock component, and the updated data is returned with the new property names.

```javascript
import { transformProps } from "@measured/puck";

const data = {
  content: [{ type: "HeadingBlock", props: { title: "Hello, world" } }]
};

const updatedData = transformProps(data, {
  // Rename `title` to `heading`
  HeadingBlock: ({ title, ...props }) => ({ heading: title, ...props })
});

console.log(updatedData);
// { content: [{ type: "HeadingBlock", props: { heading: "Hello, world" } }] };
```

--------------------------------

### Implement Asynchronous Tool Execution (JavaScript)

Source: https://puckeditor.com/docs/ai/tools

Shows how to create a tool with an asynchronous `execute` function. This is useful for tools that need to perform operations like fetching data from an external API or querying a database. The `async/await` syntax is used for handling the asynchronous operations.

```javascript
import { tool } from "@puckeditor/cloud-client";
import z from "zod/v4";
 
const getProducts = tool({
  description: "Get a list of products",
  inputSchema: z.object(),
  execute: async () => {
    const response = await fetch(`https://example.com/api/products`);
 
    return await response.json();
  },
});
```

--------------------------------

### Override Field Types with Custom Text Input - React/TypeScript

Source: https://puckeditor.com/docs/extending-puck/ui-overrides

Shows how to override all fields of a specific type using the `fieldTypes` override. This example replaces the default text field with a custom HTML input element that has a black border and padding. The override receives the field name, current value, and onChange callback for handling updates.

```jsx
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck
      // ...
      overrides={{
        fieldTypes: {
          // Override all text fields with a custom input
          text: ({ name, onChange, value }) => (
            <input
              defaultValue={value}
              name={name}
              onChange={(e) => onChange(e.currentTarget.value)}
              style={{ border: "1px solid black", padding: 4 }}
            />
          ),
        },
      }}
    />
  );
}
```

--------------------------------

### Organize Components with Categories in Puck

Source: https://puckeditor.com/docs/api-reference/configuration/config

Demonstrates how to organize Puck components into categories that appear as grouped sections in the left sidebar. Categories accept an array of component names and optional display properties like title, visibility, and default expanded state.

```javascript
const config = {
  categories: {
    typography: {
      components: ["HeadingBlock"],
    },
  },
};
```

--------------------------------

### Migrate Legacy Puck Data from DropZones to Slots using 'migrate' Helper

Source: https://puckeditor.com/docs/guides/migrations/dropzones-to-slots

Shows how to use the `migrate` helper function from '@measured/puck' to convert existing data structures that use DropZones into the new format compatible with Slots. This is essential for updating older projects without manual data transformation.

```javascript
import { migrate } from "@measured/puck";
import config from "puck.config.tsx";
 
const newData = migrate(legacyData, config);

```

--------------------------------

### Migrate Dynamic DropZone Data to Slots with 'migrateDynamicZonesForComponent'

Source: https://puckeditor.com/docs/guides/migrations/dropzones-to-slots

Demonstrates advanced data migration for dynamic DropZones (e.g., those generated in loops) using the `migrate` helper. The `migrateDynamicZonesForComponent` option allows custom logic to transform these dynamic zones into the appropriate Slot structure.

```javascript
const newData = migrate(legacyData, config, {
  migrateDynamicZonesForComponent: {
    Columns: (props, zones) => {
      return {
        ...props,
        columns: Object.values(zones).map((zone) => ({
          column: zone,
        })),
      };
    },
  },
});

```

--------------------------------

### Generate Page: Using Optional API Key (JavaScript)

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/generate

This snippet shows how to provide an optional `apiKey` to the `generate` function, overriding the default environment variable lookup. This is useful for managing API access in different environments.

```javascript
import { generate } from "@puckeditor/cloud-client";

const page = await generate({
  prompt: "Create a new homepage",
  config: {
    components: {
      HeadingBlock: {
        fields: {
          title: { type: "text" },
        },
        render: ({ title }) => title,
      },
    },
  },
  apiKey: process.env.MY_PUCK_KEY,
});
```

--------------------------------

### Create and Use usePuck Hook with Selector

Source: https://puckeditor.com/docs/api-reference/functions/use-puck

Demonstrates how to create a usePuck hook instance using the createUsePuck factory and use it with a selector function to access specific PuckApi state. The selector pattern allows granular data selection to minimize re-renders in your React components.

```typescript
import { createUsePuck } from "@measured/puck";

const usePuck = createUsePuck();

const Example = () => {
  const type = usePuck((s) => s.selectedItem?.type || "Nothing");

  return <h2>{type} selected</h2>;
};
```

--------------------------------

### Define AI Tools for Chat Stream with Puck Cloud Client

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/chat

Enables the AI agent to execute functions on your server by defining tools with descriptions and schemas. The results of these tools are factored into the AI's responses. Note that tool usage incurs additional charges.

```typescript
import { chat, tool } from "@puckeditor/cloud-client";
import { z } from "zod";

export async function POST(request) {
  const body = await request.json();

  return chat(body, {
    ai: {
      tools: {
        getProducts: tool({
          description: "Get a list of product codes",
          inputSchema: z.object(),
          execute: async () => {
            return [
              {
                name: "Google Maps",
                product_code: "maps",
              },
              {
                name: "Google Calendar",
                product_code: "calendar",
              },
            ];
          },
        }),
      },
    },
  });
}
```

--------------------------------

### Render Puck Preview Component (JavaScript/TypeScript)

Source: https://puckeditor.com/docs/api-reference/components/puck-preview

Demonstrates how to render a drag-and-drop preview for current data within a custom Puck UI. This component requires the '@measured/puck' library.

```javascript
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck>
      <Puck.Preview />
    </Puck>
  );
}
```

--------------------------------

### Providing Data for <Render>

Source: https://puckeditor.com/docs/api-reference/components/render

This snippet illustrates how to structure the 'data' prop for the <Render> component. It defines an array of 'content' objects, each with 'props' and a 'type' that corresponds to a component defined in the 'config'.

```jsx
export function Example() {
  return (
    <Render
      data={{
        content: [
          {
            props: { children: "Hello, world", id: "id" },
            type: "HeadingBlock",
          },
        ],
        root: {},
      }}
      // ...
    />
  );
}
```

--------------------------------

### Generate API Endpoint

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/generate

The `generate` function creates a new page or updates an existing one based on a provided prompt and configuration.

```APIDOC
## POST /generate

### Description
Generates a page based on a natural language prompt and a provided configuration. This can be used to create new pages or update existing ones.

### Method
POST

### Endpoint
/generate

### Parameters
#### Request Body
- **prompt** (String) - Required - A natural language prompt for the generation.
- **config** (Config) - Required - The Puck configuration for the page, including component definitions.
- **apiKey** (String) - Optional - Your API key. Defaults to the `PUCK_API_KEY` environment variable.
- **context** (String) - Optional - System context and instructions for the agent.
- **host** (String) - Optional - A custom Puck Cloud host URL.
- **pageData** (Data) - Optional - Existing Puck data to consider when actioning the prompt.
- **tools** (Object) - Optional - Define tools that enable the agent to execute functions on your server and retrieve data.

### Request Example
```javascript
import { generate } from "@puckeditor/cloud-client";

const page = await generate({
  prompt: "Create a page about dogs",
  config: {
    components: {
      HeadingBlock: {
        fields: {
          title: { type: "text" },
        },
        render: ({ title }) => title,
      },
    },
  },
});
```

### Response
#### Success Response (200)
- **data** (Data) - A Puck `Data` object representing the generated or updated page.

#### Response Example
```json
{
  "root": {
    "props": {
      "title": "Pawesome Friends"
    }
  },
  "content": [
    {
      "type": "HeadingBlock",
      "props": {
        "id": "Heading-12345",
        "title": "Discover Man's Best Friend"
      }
    }
  ]
}
```
```

--------------------------------

### Generate JSON Schema with Zod

Source: https://puckeditor.com/docs/ai/ai-configuration

This code demonstrates using Zod to generate JSON schema for complex data structures. It shows how to integrate Zod's schema generation with the 'ai.schema' configuration for custom fields.

```javascript
import z from "zod/v4";
 
const config = {
  components: {
    HeadingBlock: {
      fields: {
        object: {
          type: "custom",
          ai: {
            schema: z.toJSONSchema(
              z.object({
                title: z.string(),
              })
            ),
          },
          render: () => <input />,
        },
      },
      render: ({ object }) => <h1>{object.title}</h1>,
    },
  },
};
```

--------------------------------

### Create Chat Stream with Puck Cloud Client

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/chat

Initiates a chat stream between the AI plugin and Puck Cloud. It intercepts chat requests and returns a `Response` object. Requires `body` and optionally accepts `cloudOptions` for AI configuration.

```typescript
import { chat } from "@puckeditor/cloud-client";

export async function POST(request) {
  const body = await request.json();

  return chat(body, {
    ai: {
      context: "We are Google",
    },
  });
}
```

--------------------------------

### Define and Apply a Puck Editor Plugin (JavaScript)

Source: https://puckeditor.com/docs/api-reference/plugins

This snippet demonstrates how to define a custom plugin for Puck Editor and apply it to the editor instance. It shows how to override specific UI elements, such as drawer items, by providing custom React components. The plugin is passed as an array to the `plugins` prop of the Puck component.

```javascript
import { Puck } from "@measured/puck";

const MyPlugin = {
  overrides: {
    drawerItem: ({ name }) => (
      <div style={{ backgroundColor: "hotpink" }}>{name}</div>
    ),
  },
};

export function Editor() {
  return (
    <Puck
      // ...
      plugins={[MyPlugin]}
    />
  );
}
```

--------------------------------

### Compare Data Models: DropZone Zones vs. Slot Inline Data

Source: https://puckeditor.com/docs/guides/migrations/dropzones-to-slots

Illustrates the structural difference in data representation between the legacy DropZone's 'zones' object and the new Slots' inline, recursive data model. The Slot model embeds data directly as props within the component, simplifying data management.

```json
{
  "content": [
    {
      "type": "Grid",
      "props": {
        "id": "Grid-12345"
      }
    }
  ],
  "zones": {
    "Grid-12345:items": [
      {
        "type": "HeadingBlock",
        "props": {
          "id": "Heading-12345",
          "title": "Hello, world"
        }
      }
    ]
  }
}

// After migration (Slot inline data model)
{
  "content": [
    {
      "type": "Grid",
      "props": {
        "id": "Grid-12345",
        "items": [
          {
            "type": "HeadingBlock",
            "props": {
              "id": "Heading-12345",
              "title": "Hello, world"
            }
          }
        ]
      }
    }
  ]
}

```

--------------------------------

### Implement DropZone Component in React

Source: https://puckeditor.com/docs/api-reference/components/drop-zone

Demonstrates the basic implementation of the `<DropZone>` component within a React application using Puck Editor. This involves importing `DropZone` and defining a `zone` prop to identify the droppable region.

```javascript
import { DropZone } from "@measured/puck";
 
const config = {
  components: {
    Example: {
      render: () => {
        return (
          <div>
            <DropZone zone="my-content" />
          </div>
        );
      },
    },
  },
};

```

--------------------------------

### POST Request Handler with AI Context

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/puck-handler

Handles POST requests for the /api/puck/* endpoint using puckHandler from @puckeditor/cloud-client. It configures AI behavior by providing a system context for generating Google landing pages. Requires a request object as input and returns a response.

```typescript
// app/api/puck/[...all]/route.ts

import { puckHandler } from "@puckeditor/cloud-client";

export const POST = (request) => {
  return puckHandler(request, {
    ai: {
      context: "We are Google. You create Google landing pages.",
    },
  });
};
```

--------------------------------

### Render Puck Page

Source: https://puckeditor.com/docs/getting-started

Renders a page using the Puck editor's Render component. It requires the configuration and data previously defined or saved. This is used to display the content created with the Puck editor.

```jsx
import { Render } from "@measured/puck";

export function Page() {
  return <Render config={config} data={data} />;
}
```

--------------------------------

### Puck Editor with Custom Children and Preview

Source: https://puckeditor.com/docs/api-reference/components/puck

Demonstrates how to use the `children` prop to render custom nodes within the Puck editor, specifically showing how to include Puck.Preview. This allows for compositional interfaces and embedding preview functionalities.

```javascript
export function Editor() {
  return (
    <Puck /*...*/>
      <Puck.Preview />
    </Puck>
  );
}
```

--------------------------------

### Default Viewports Configuration (JSON)

Source: https://puckeditor.com/docs/api-reference/components/puck

Defines the default viewport configurations for the Puck editor, including width, height, icon, and label for small, medium, and large screen sizes. This JSON structure is used to set up responsive design previews.

```json
[
  {
    "width": 360,
    "height": "auto",
    "icon": "Smartphone",
    "label": "Small"
  },
  {
    "width": 768,
    "height": "auto",
    "icon": "Tablet",
    "label": "Medium"
  },
  {
    "width": 1280,
    "height": "auto",
    "icon": "Monitor",
    "label": "Large"
  }
]
```

--------------------------------

### Configure Allowed Components in DropZone

Source: https://puckeditor.com/docs/api-reference/components/drop-zone

Shows how to restrict the types of components that can be dropped into a `<DropZone>` by using the `allow` prop. This ensures only specified components, like `HeadingBlock`, are accepted.

```javascript
const config = {
  components: {
    Example: {
      render: () => {
        return (
          <div>
            <DropZone zone="my-content" allow={"["HeadingBlock"]"} />
          </div>
        );
      },
    },
  },
};

```

--------------------------------

### Create and Register Puck Plugin with Overrides

Source: https://puckeditor.com/docs/api-reference/plugin

Creates a plugin object that overrides the drawerItem UI component and registers it with the Puck editor component. The plugin uses the overrides property to customize how drawer items are rendered with custom styling. This demonstrates basic plugin structure and integration with the Puck component.

```javascript
import { Puck } from "@measured/puck";

const MyPlugin = {
  overrides: {
    drawerItem: ({ name }) => (
      <div style={{ backgroundColor: "hotpink" }}>{name}</div>
    ),
  },
};

export function Editor() {
  return (
    <Puck
      plugins={[MyPlugin]}
    />
  );
}
```

--------------------------------

### TypeScript Root Configuration in Puck

Source: https://puckeditor.com/docs/integrating-puck/root-configuration

This TypeScript snippet demonstrates how to strictly type the root configuration in Puck using generic types. By defining a `RootProps` interface, you can ensure type safety for the root's properties, including custom fields and their associated data.

```typescript
import type { Config } from "@measured/puck";

type RootProps = {
  description: string;
};

const config: Config<{}, RootProps> = {
  // ...
};
```

--------------------------------

### Tool with Optional Name Parameter

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/tool

Define a tool with an optional name property to provide a custom identifier for the tool. The name helps with tool identification and debugging while the description is used by the agent to understand tool functionality.

```TypeScript
import { tool } from "@puckeditor/cloud-client";

const myTool = tool({
  name: "getWeather",
  description: "Get the weather for a set of coordinates",
  inputSchema: z.object({
    longitude: z.number(),
    latitude: z.number(),
  }),
  execute: async ({ longitude, latitude }) => {
    return getWeather({ longitude, latitude }); // Query your database
  },
});
```

--------------------------------

### Create Client-Side Component Configuration (TypeScript)

Source: https://puckeditor.com/docs/integrating-puck/server-components

Defines a configuration for the `<Puck>` component, intended for client-side use. It includes component definitions with fields, default properties, and a render function that utilizes client-specific hooks like `useState`. This configuration imports `UserConfig` from a local types file.

```typescript
import type { UserConfig } from "./puck-types.ts";

export const config: UserConfig = {
  components: {
    HeadingBlock: {
      fields: {
        title: { type: "text" },
      },
      defaultProps: {
        title: "Heading",
      },
      render: ({ title }) => {
        useState(); // useState fails on the server

        return (
          <div style={{ padding: 64 }}>
            <h1>{title}</h1>
          </div>
        );
      },
    },
  },
};
```

--------------------------------

### registerOverlayPortal Function

Source: https://puckeditor.com/docs/api-reference/functions/register-overlay-portal

Registers a node as an Overlay Portal, enabling interaction beneath the Puck overlay. Returns a cleanup function.

```APIDOC
## registerOverlayPortal

### Description
Registers a node as an Overlay Portal, enabling interaction beneath the Puck overlay.

### Method
Function Call

### Endpoint
N/A (Client-side function)

### Parameters
#### Args
- **el** (HTMLElement) - Required - The element to turn into a portal. Will do nothing if `null` or `undefined`.
- **opts** (Config) - Optional - Configuration options for the portal.
  #### opts.disableDrag
  - **disableDrag** (boolean) - Optional - Disable triggering a drag of the parent component when interacting with this element. Defaults to `false`.
  #### opts.disableDragOnFocus
  - **disableDragOnFocus** (boolean) - Optional - Disable triggering a drag of the parent component when interacting with this element once it is focused. Drag is disabled following a short delay after focusing. Defaults to `true`.

### Request Example
```javascript
import { registerOverlayPortal } from "@measured/puck";
 
const MyComponent = () => {
  const ref = useRef(null);
 
  useEffect(() => registerOverlayPortal(ref.current), [ref.current]);
 
  return <button ref={ref}>Clickable</button>;
};
```

### Response
#### Success Response
- **cleanupFunction** (Function) - A function to clean-up the portal.

#### Response Example
```javascript
// Returned cleanup function can be called to remove the portal
const cleanup = registerOverlayPortal(myElement);
// later...
cleanup();
```
```

--------------------------------

### RootData Basic Structure with Props

Source: https://puckeditor.com/docs/api-reference/data-model/root-data

Basic RootData object structure showing the props parameter. Props contain the data that Puck will pass to the render() method for the root component. This is the minimal required structure for root data.

```json
{
  "props": {
    "title": "Hello, world"
  }
}
```

--------------------------------

### Introducing New Field Types with Puck Plugin

Source: https://puckeditor.com/docs/extending-puck/plugins

Demonstrates how to introduce a new field type, 'richText', using both `overrides` and `fieldTransforms` in a Puck plugin. It shows how to create an editable input for the new field type and handle user input.

```javascript
import { registerOverlayPortal } from "@measured/puck";
 
const plugin = {
  overrides: {
    // Add a richText field type
    fieldTypes: {
      richText: ({ name, value }) => <input name={name} value={value} />,
    },
  },
  fieldTransforms: {
    // Wrap the value in a span, create an overlay portal, and make it editable
    richText: ({ value }) => {
      const handleInput = useCallback(() => {}, []); // Implement your input behavior
 
      return (
        <span ref={registerOverlayPortal} contentEditable onInput={handleInput}>
          {value}
        </span>
      );
    },
  },
};
```

--------------------------------

### Set Default Props for Puck Component (JavaScript)

Source: https://puckeditor.com/docs/integrating-puck/component-configuration

This JavaScript snippet demonstrates how to set default properties ('defaultProps') for a Puck component ('HeadingBlock'). The 'title' prop is initialized with 'Hello, world', which will populate the corresponding field when the component is first added to the editor.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "text",
        },
      },
      defaultProps: {
        title: "Hello, world",
      },
      render: ({ title }) => {
        return <h1>{title}</h1>;
      },
    },
  },
};
```

--------------------------------

### Define Component Render Function in Puck Config (JavaScript)

Source: https://puckeditor.com/docs/integrating-puck/component-configuration

This snippet shows how to define a basic component ('HeadingBlock') within Puck's configuration. The 'render' function specifies how the component should be displayed. Puck uses this to render the UI in the editor and the final output.

```javascript
const config = {
  components: {
    HeadingBlock: {
      render: () => {
        return <h1>Hello, world</h1>;
      },
    },
  },
};
```

--------------------------------

### Configure Root Render Function in Puck

Source: https://puckeditor.com/docs/integrating-puck/root-configuration

This code snippet demonstrates how to configure the root component's render function in Puck. The `render` function wraps all child components and can be customized to control the overall structure of the rendered output. It accepts `children` as a prop, which contains the nested components.

```javascript
const config = {
  components: {
    HeadingBlock: {
      render: () => {
        return <h1>Hello, world</h1>;
      },
    },
  },
  root: {
    render: ({ children }) => {
      return <div>{children}</div>;
    },
  },
};
```

--------------------------------

### Puck Handler API

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/puck-handler

Handles all endpoints for the /api/puck/* path, used by the AI plugin. It allows for fine-tuning AI behavior through various configuration options.

```APIDOC
## POST /api/puck/[...all]

### Description
Handles AI plugin requests for the Puck editor. This endpoint processes incoming requests and interacts with the AI to generate or refine content based on provided context and tools.

### Method
POST

### Endpoint
/api/puck/[...all]

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None (The request object itself is passed to the handler)

### Request Example
```typescript
// app/api/puck/[...all]/route.ts

import { puckHandler } from "@puckeditor/cloud-client";

export const POST = (request) => {
  return puckHandler(request, {
    ai: {
      context: "We are Google. You create Google landing pages.",
    },
  });
};
```

### Response
#### Success Response (200)
The response will contain the AI's output, typically in JSON format, representing the generated or refined content.

#### Response Example
```json
{
  "//": "Example AI response structure"
}
```

## Configuration Options for `puckHandler`

### `ai.context`
**Description**: Provides system context and instructions to the AI agent. This guides the AI's behavior and output.

**Type**: String

**Status**: Optional

**Example**:
```javascript
const handler = puckHandler({
  ai: {
    context: "We are Google. You create Google landing pages.",
  },
});
```

### `ai.tools`
**Description**: Defines tools that enable the AI agent to execute functions on your server and retrieve data. The result of the tool will be factored into the request. Each tool call incurs an additional charge.

**Type**: Object

**Status**: Optional

**Example**:
```javascript
import { tool } from "@puckeditor/cloud-client";
import { z } from "zod";

const handler = puckHandler({
  ai: {
    tools: {
      getProducts: tool({
        description: "Get a list of product codes",
        inputSchema: z.object(),
        execute: async () => {
          return [
            {
              name: "Google Maps",
              product_code: "maps",
            },
            {
              name: "Google Calendar",
              product_code: "calendar",
            },
          ];
        },
      }),
    },
  },
});
```

### `apiKey`
**Description**: Sets your API key for authentication. Defaults to the `PUCK_API_KEY` environment variable.

**Type**: String

**Status**: Optional

**Example**:
```javascript
const handler = puckHandler({
  apiKey: process.env.MY_PUCK_KEY,
});
```

### `host`
**Description**: Sets a custom Puck Cloud host URL.

**Type**: String

**Status**: Optional

**Example**:
```javascript
const handler = puckHandler({
  host: "https://www.example.com/api",
});
```
```

--------------------------------

### POST /chat

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/chat

Creates a chat stream between the AI plugin and the Puck Cloud, and intercepts chat requests made by the plugin.

```APIDOC
## POST /chat

### Description
Creates a chat stream between the AI plugin and the Puck Cloud, and intercepts chat requests made by the plugin.

### Method
POST

### Endpoint
/chat

### Parameters
#### Request Body
- **chatParams** (ChatParams) - Required - Parameters for the chat session.
- **cloudOptions** (CloudOptions) - Optional - Options for configuring the cloud client.

### Request Example
```json
{
  "chatParams": {
    "config": { "components": {} },
    "pageData": { "root": {}, "content": [] },
    "messages": []
  },
  "cloudOptions": {
    "ai": {
      "context": "We are Google",
      "tools": {},
      "apiKey": "SECRET",
      "host": "https://www.example.com/api/"
    }
  }
}
```

### Response
#### Success Response (200)
- **Response** (Response) - A Response object representing the chat stream.

#### Response Example
```json
{
  "example": "Response object"
}
```

## Args

`chatParams`: Required. An object containing parameters for the chat session.
  - `config` (Config): Required. The Puck config for the page.
    - `components` (object): Defines custom components for the page.
  - `pageData` (Data): Required. The current page data.
    - `root` (object): Root properties of the page.
    - `content` (array): Content of the page.
  - `messages` (UIMessage[]): Required. The entire message history for the chat.

`cloudOptions`: Optional. An object containing options for configuring the cloud client.
  - `ai.context` (String): Provides system context and instructions to the agent.
  - `ai.tools` (Object): Defines tools that enable the agent to execute functions on your server.
  - `apiKey` (String): Sets your API key. Uses `PUCK_API_KEY` environment variable by default.
  - `host` (String): Sets a custom Puck Cloud host.
```

--------------------------------

### Puck Editor: Handling Actions

Source: https://puckeditor.com/docs/api-reference/components/puck

The `onAction` callback triggers when Puck dispatches an action, such as 'insert' or 'set'. It receives the action type, new application state, and previous application state, allowing for tracking changes or performing side effects.

```javascript
export function Editor() {
  return (
    <Puck
      onAction={(action, appState, prevAppState) => {
        if (action.type === "insert") {
          console.log("New component was inserted", appState);
        }
      }}
      // ...
    />
  );
}
```

--------------------------------

### Configure Disallowed Components in DropZone

Source: https://puckeditor.com/docs/api-reference/components/drop-zone

Explains how to exclude specific components from being dropped into a `<DropZone>` using the `disallow` prop. Components listed in `allow` will take precedence over those in `disallow`.

```javascript
const config = {
  components: {
    Example: {
      render: () => {
        return (
          <div>
            <DropZone zone="my-content" disallow={"["HeadingBlock"]"} />
          </div>
        );
      },
    },
  },
};

```

--------------------------------

### Number Input Field Component

Source: https://puckeditor.com/docs/api-reference/fields/number

This section details the configuration for rendering a 'number' input field within the Puck Editor. It extends the base field capabilities and allows for setting minimum, maximum, placeholder, and step values.

```APIDOC
## Number Input Field Configuration

### Description
Configures a `number` input field within the Puck Editor. This component allows users to input numeric values and supports validation based on min/max constraints, along with placeholder text and stepping intervals.

### Method
N/A (Configuration Object)

### Endpoint
N/A (Component Configuration)

### Parameters
#### Path Parameters
N/A

#### Query Parameters
N/A

#### Request Body (Component Fields)
- **type** (string) - Required - Must be set to "number" to define this as a number input.
- **max** (number) - Optional - The maximum allowable numeric value for the input.
- **min** (number) - Optional - The minimum allowable numeric value for the input.
- **placeholder** (string) - Optional - The placeholder text displayed when the input is empty.
- **step** (number) - Optional - The increment or decrement value when using the input's stepper controls.

### Request Example
```json
{
  "components": {
    "Example": {
      "fields": {
        "myNumber": {
          "type": "number",
          "min": 0,
          "max": 100,
          "step": 1,
          "placeholder": "Enter a number"
        }
      },
      "render": ({ myNumber }) => {
        return <div>The entered number is: {myNumber}</div>;
      }
    }
  }
}
```

### Response
#### Success Response (200)
N/A (This is a configuration object, not an API endpoint returning data.)

#### Response Example
N/A
```

--------------------------------

### Puck Editor Header Path Configuration

Source: https://puckeditor.com/docs/api-reference/components/puck

Shows how to set a path that appears after the header title in the Puck editor's interface using the `headerPath` prop. This helps in providing context or navigation within the editor.

```javascript
export function Editor() {
  return (
    <Puck
      headerPath="/my-page"
      // ...
    />
  );
}
```

--------------------------------

### Render Puck Editor

Source: https://puckeditor.com/docs/getting-started

Renders the Puck editor component within a React application. It requires the '@measured/puck' package and its CSS. The component takes a configuration object, initial data, and a save callback function.

```jsx
import { Puck } from "@measured/puck";
import "@measured/puck/puck.css";

// Create Puck component config
const config = {
  components: {
    HeadingBlock: {
      fields: {
        children: {
          type: "text",
        },
      },
      render: ({ children }) => {
        return <h1>{children}</h1>;
      },
    },
  },
};

// Describe the initial data
const initialData = {};

// Save the data to your database
const save = (data) => {};

// Render Puck editor
export function Editor() {
  return <Puck config={config} data={initialData} onPublish={save} />;
}
```

--------------------------------

### Render Puck.Fields Component

Source: https://puckeditor.com/docs/api-reference/components/puck-fields

This snippet demonstrates the basic usage of the Puck.Fields component within the Puck editor. It shows how to import the Puck library and render the Fields component as a child of the Puck component. This is the standard way to include field rendering in your custom Puck UI.

```jsx
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck>
      <Puck.Fields />
    </Puck>
  );
}
```

--------------------------------

### Puck API Reference

Source: https://puckeditor.com/docs/api-reference/puck-api

Documentation for the Puck API, detailing its parameters and methods for accessing and manipulating Puck's internal state and behavior.

```APIDOC
## Puck API

`PuckApi` exposes Pucks internals to enable extension and modification to Pucks core behavior. It can be accessed by the `usePuck` and `useGetPuck` hooks.

`PuckApi` can currently only be accessed through composition, UI overrides or custom fields.

### Params

Param| Example| Type  
---|---|---
`appState`| `{ data: {}, ui: {} }`| AppState  
`dispatch`| `(action: PuckAction) => void`| Function  
`getItemBySelector`| `() => ({ type: "Heading", props: {} })`| Function  
`getItemById`| `() => ({ type: "Heading", props: {} })`| Function  
`getSelectorForId`| `() => ({ index: 0, zone: 'Flex-123:children'  })`| Function  
`getPermissions`| `() => ({ delete: true  })`| Function  
`history`| `{}`| Object  
`refreshPermissions`| `() => void`| Function  
`selectedItem`| `{ type: "Heading", props: {id: "my-heading"} }`| ComponentData  

### `appState`

The current application state for this Puck instance.

```javascript
console.log(appState.data);
// { content: [], root: {}, zones: {} }
```

### `dispatch(action)`

Execute an action to mutate the Puck application state.

```javascript
dispatch({
  type: "setUi",
  ui: {
    leftSideBarVisible: false,
  },
});
```

### `getItemBySelector(selector)`

Get an items `ComponentData` by its selector.

```javascript
getItemBySelector({
  index: 0,
  zone: "Flex-123:children", // The "children" slot field in the component with id "Flex-123"
});
// { type: "HeadingBlock", props: {} }
```

### `getItemById(id)`

Get an items `ComponentData` by its component id.

```javascript
getItemById("HeadingBlock-123");
// { type: "HeadingBlock", props: {} }
```

### `getSelectorForId(id)`

Get an items selector by its component id.

```javascript
getSelectorForId("HeadingBlock-123");
// { index: 0, zone: "Flex-123:children" }
```

### `getPermissions(params)`

Get global, component or resolved dynamic permissions.

```javascript
getPermissions();
// { delete: true, edit: true }
```

#### Params

Param| Example| Type  
---|---|---
`item`| `{ type: "HeadingBlock", props: { id: "1234" } }`| Object  
`root`| `false`| Boolean  
`type`| `"HeadingBlock"`| String  

##### `item`

Specify `item` to retrieve the permissions for a given component instance, resolving any dynamic permissions for that component, as set by the `resolvePermissions` parameter.

```javascript
getPermissions({
  item: { type: "HeadingBlock", props: { id: "Heading-1234" } }, // Get resolved permissions for Heading-1234
});
// { delete: false }
```

The `getPermissions` function will be redefined when after resolving dynamic permissions, so its generally required to wrap it in a `useEffect` hook:

```javascript
const [myPermissions, setMyPermissions] = useState(getPermissions());
 
useEffect(() => {
  setMyPermissions(getPermissions());
}, [getPermissions]);
```

##### `root`

Specify `root` to retrieve the permissions for the `root`, as set by the `permissions` parameter.

```javascript
getPermissions({ root: true });
// { delete: false }
```

##### `type`

Specify `type` to retrieve the permissions for a given component type, as set by the `permissions` parameter.

```javascript
getPermissions({ type: "HeadingBlock" });
// { delete: false }
```

### `history`

The `history` API provides programmatic access to the undo/redo AppState history.

Param| Example| Type  
---|---|---
`back`| `() => void`| Function  
`forward`| `() => void`| Function  
`hasPast`| `true`| Boolean  
`hasFuture`| `false`| Boolean  
`histories`| `[{ id: 'abc123', data: {} }]`| History[]  
`index`| `5`| Number  
`setHistories`| `setHistories: (histories) => void`| Function  
`setHistoryIndex`| `setHistoryIndex: (index) => void`| Function  

#### `history.back()`

A function to move the app state back through the histories.

#### `history.forward()`

A function to move the app state forward through the histories.

#### `history.hasPast`

A boolean describing whether or not the present app state has past history items.

#### `history.hasFuture`

A boolean describing whether or not the present app state has future history items.

#### `history.histories`

An array describing the recorded history as `History` objects.

##### `History` params

Param| Example| Type  
---|---|---
`state`| `{}`| AppState  
`id`| `abc123`| String  

###### `state`

The app state payload for this history entry.

###### `id`

An optional ID for this history entry.

#### `history.index`

The index of the currently selected history in `history.histories`

#### `setHistories`

A function to set the history state.

```javascript
setHistories([]); // clears all history
```

#### `setHistoryIndex`

A function to set current history index.

```javascript
setHistoryIndex(2);
```

### `refreshPermissions(params)`

Force the permissions to refresh, running all `resolvePermissions` functions and skipping the cache.

```javascript
resolvePermissions(); // Refresh all permissions
```
```

--------------------------------

### Puck Config with Client Component in RSC

Source: https://puckeditor.com/docs/integrating-puck/server-components

This configuration defines a Puck component ('HeadingBlock') that utilizes client-specific functionality (e.g., 'useState'). It demonstrates how to structure the config and the component file, ensuring it can be rendered within an RSC environment by marking the component file with 'use client'.

```typescript
import type { Config } from "@measured/puck";
import type { HeadingBlockProps } from "./components/HeadingBlock";
import HeadingBlock from "./components/HeadingBlock";

type Props = {
  HeadingBlock: HeadingBlockProps;
};

export const config: Config<Props> = {
  components: {
    HeadingBlock: {
      fields: {
        title: { type: "text" },
      },
      defaultProps: {
        title: "Heading",
      },
      // You must call the component, rather than passing it in directly. This will change in the future.
      render: ({ title }) => <HeadingBlock title={title} />,
    },
  },
};
```

```javascript
"use client";

import { useState } from "react";

export type HeadingBlockProps = {
  title: string;
};

export default ({ title }: { title: string }) => {
  useState(); // useState fails on the server

  return (
    <div style={{ padding: 64 }}>
      <h1>{title}</h1>
    </div>
  );
};
```

--------------------------------

### Dynamic Root Props with resolveData in JavaScript

Source: https://puckeditor.com/docs/integrating-puck/dynamic-props

Demonstrates the application of `resolveData` at the root level of the Puck configuration. This allows for dynamic prop resolution for the main container of the application, affecting how the entire application's initial state or top-level components are rendered. It shows setting a 'resolvedTitle' based on the root's 'title' prop.

```javascript
const config = {
  components: {},
  root: {
    fields: {
      title: {
        type: "text",
      },
      resolvedTitle: {
        type: "text",
      },
    },
    resolveData: async ({ props }) => {
      return {
        props: {
          resolvedTitle: props.title,
        },
      };
    },
    render: ({ children, resolvedTitle }) => {
      return (
        <>
          <h1>{resolvedTitle}</h1>
          {children}
        </>
      );
    },
  },
};
```

--------------------------------

### Execute All Data Resolvers with resolveAllData (JavaScript)

Source: https://puckeditor.com/docs/api-reference/functions/resolve-all-data

The resolveAllData utility function executes all resolveData methods on a data payload, returning the updated value. This is useful for running resolvers before passing data to the <Render> component. It takes `data` and `config` as arguments and returns the updated Data object.

```javascript
import { resolveAllData } from "@measured/puck";

const updatedData = await resolveAllData(data, config);
```

--------------------------------

### Override Puck Editor Components

Source: https://puckeditor.com/docs/api-reference/overrides/components

Defines how to override the default component list in Puck Editor using a configuration object. This allows for custom component rendering. It expects a `components` key within the overrides object.

```javascript
const overrides = {
  components: ({ children }) => <div>{children}</div>,
};
```

--------------------------------

### Set API Key for Puck Cloud Client Chat

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/chat

Specifies a custom API key for authenticating with the Puck Cloud. If not provided, it defaults to the `PUCK_API_KEY` environment variable.

```typescript
import { chat } from "@puckeditor/cloud-client";

export async function POST(request) {
  const body = await request.json();

  return chat(body, {
    apiKey: process.env.MY_PUCK_KEY,
  });
}
```

--------------------------------

### Set Required Fields for AI

Source: https://puckeditor.com/docs/ai/ai-configuration

This code demonstrates explicitly marking a field as required using the 'required' parameter within the 'ai' configuration. This ensures the agent considers the field mandatory, even if not present in defaultProps.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        src: {
          type: "text",
          ai: {
            required: true, // Mark this as required, even though it doesn't exist in defaultProps
          },
        },
      },
      render: ({ src }) => <img src={src} />,
      defaultProps: {},
    },
  },
};
```

--------------------------------

### Component Using Global Metadata (JavaScript)

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Shows how to access and utilize global metadata within a component's render function. The 'puck.metadata' prop allows components to incorporate data passed from the parent Puck or Render component.

```javascript
const config = {
  components: {
    Example: {
      inline: true,
      render: ({ text, puck: { metadata } }) => {
        return <div>Hello, {metadata.text || text}</div>;
      },
    },
  },
};

```

--------------------------------

### Register Node as Overlay Portal (JavaScript)

Source: https://puckeditor.com/docs/api-reference/functions/register-overlay-portal

Registers an HTML element as an overlay portal using the registerOverlayPortal function. This allows interactions beneath the Puck overlay. It takes the element and an optional configuration object for drag behavior. Returns a cleanup function.

```javascript
import { registerOverlayPortal } from "@measured/puck";
import { useRef, useEffect } from "react";

const MyComponent = () => {
  const ref = useRef(null);

  useEffect(() => registerOverlayPortal(ref.current), [ref.current]);

  return <button ref={ref}>Clickable</button>;
};

// Example with options:
// const MyComponentWithOptions = () => {
//   const ref = useRef(null);
//
//   useEffect(() => {
//     if (ref.current) {
//       const cleanup = registerOverlayPortal(ref.current, {
//         disableDrag: true,
//         disableDragOnFocus: false
//       });
//       return cleanup; 
//     }
//   }, [ref.current]);
//
//   return <button ref={ref}>Clickable</button>;
// };
```

--------------------------------

### Customize Viewports in Puck Editor

Source: https://puckeditor.com/docs/integrating-puck/viewports

Demonstrates how to define custom viewports for the Puck editor using the `viewports` API. This allows for specific width, height, labels, and icons to be set for different screen simulations. The `height` parameter can be numeric or 'auto', and `label` and `icon` are optional for UI customization.

```javascript
import React from "react";
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck
      viewports={[
        {
          width: 1440,
          height: "auto", // Optional height. Can be numeric or "auto". Defaults to "auto".
          label: "My Viewport", // Optional. Shown in tooltip.
          icon: <svg />, // Optional. Use lucide-icons to align with Puck UI.
        },
      ]}
      // ...
    />
  );
}
```

--------------------------------

### Render ActionBar Action Button with Click Handler

Source: https://puckeditor.com/docs/api-reference/components/action-bar-action

Creates an ActionBar.Action component that renders a star icon () as an action button with an onClick callback that logs to the console. The children prop can accept strings, SVG elements, or Lucide icons for visual representation.

```jsx
<ActionBar>
  <ActionBar.Action onClick={() => console.log("Clicked!")}></ActionBar.Action>
</ActionBar>
```

--------------------------------

### Apply Inline Styles to DropZone

Source: https://puckeditor.com/docs/api-reference/components/drop-zone

Illustrates how to apply inline CSS styles to the `<DropZone>` component using the `style` prop. This complements any default Puck styles applied to the component.

```javascript
const config = {
  components: {
    Example: {
      render: () => {
        return (
          <div>
            <DropZone zone="my-content" style={{ display: "flex" }} />
          </div>
        );
      },
    },
  },
};

```

--------------------------------

### Migrate DropZones to Slots

Source: https://puckeditor.com/docs/api-reference/functions/migrate

This migration converts data from `zones` to inline `slots` within component props. It requires a `config` object to map zone names to slot field names. This change improves how nested content is managed and rendered.

```json
{
  "content": [
    {
      "type": "Grid",
      "props": {
        "id": "Grid-12345"
      }
    }
  ],
  "zones": {
    "Grid-12345:items": [
      {
        "type": "HeadingBlock",
        "props": {
          "id": "Heading-12345",
          "title": "Hello, world"
        }
      }
    ]
  }
}
```

```json
{
  "content": [
    {
      "type": "Grid",
      "props": {
        "id": "Grid-12345",
        "items": [
          {
            "type": "HeadingBlock",
            "props": {
              "id": "Heading-12345",
              "title": "Hello, world"
            }
          }
        ]
      }
    }
  ]
}
```

--------------------------------

### Configure AI Schema for a Component

Source: https://puckeditor.com/docs/api-reference/ai/configuration/components

This snippet shows how to define a custom JSON schema for a component's AI configuration. This is useful when Puck AI cannot infer the schema from the component's definition, particularly for custom, external, or user-defined fields. It extends the component's `ai` configuration with a `schema` property.

```javascript
const config = {
  components: {
    HeadingBlock: {
      ai: {
        schema: {
          type: "object",
          parameters: { title: { type: "text" } },
          required: ["title"],
        },
      },
      fields: {
        title: {
          type: "custom",
          render: () => <input />,
        },
      },
      render: ({ title }) => <h1>{title}</h1>,
    },
  },
};

```

--------------------------------

### set Action

Source: https://puckeditor.com/docs/api-reference/actions

Change the entire AppState in a single action. This action allows you to replace the complete application state including both data and UI state at once.

```APIDOC
## set Action

### Description
Change the entire AppState in a single action.

### Action Type
set

### Parameters
- **type** (string) - Required - Action type identifier: "set"
- **state** (AppState) - Required - The complete AppState object containing data and ui properties

### Request Example
```javascript
dispatch({
  type: "set",
  state: {
    data: {},
    ui: {}
  }
});
```

### AppState Structure
- **data** (Data) - The data payload managed by Puck
- **ui** (UiState) - The UI state configuration

### Response
The action replaces the entire AppState and triggers a complete re-render of the application with the new state.
```

--------------------------------

### Set Custom Host for Puck Cloud Client Chat

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/chat

Configures a custom host URL for the Puck Cloud API. This is useful for self-hosted instances or specific regional endpoints.

```typescript
import { chat } from "@puckeditor/cloud-client";

export async function POST(request) {
  const body = await request.json();

  return chat(body, {
    host: "https://www.example.com/api",
  });
}
```

--------------------------------

### Access Puck API in Render Lifecycle using usePuck

Source: https://puckeditor.com/docs/extending-puck/internal-puck-api

This hook allows access to the Puck API within a component's render lifecycle. It's recommended to use selectors to optimize re-rendering by focusing on specific parts of the API state. The hook `usePuck` is imported from `@measured/puck`.

```javascript
import { createUsePuck } from "@measured/puck";

const usePuck = createUsePuck();

const Example = () => {
  // Use a selector so you only re-render when the selected type changes
  const type = usePuck((s) => s.selectedItem?.type || "Nothing");

  return <h2>{type} selected</h2>;
};
```

--------------------------------

### Migrate Data Payload with Puck Editor

Source: https://puckeditor.com/docs/api-reference/functions/migrate

The `migrate` function from `@measured/puck` transforms legacy data payloads to the latest structure. It takes the legacy data as input and returns the updated data object. This is crucial for maintaining compatibility with evolving component structures.

```javascript
import { migrate } from "@measured/puck";

migrate(legacyData);
```

--------------------------------

### Puck Handler with Custom Host Configuration

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/puck-handler

Configures the puckHandler to use a custom Puck Cloud host URL. This allows users to point the handler to a self-hosted instance or a specific API endpoint. The code returns a handler function with the specified host.

```javascript
const handler = puckHandler({
  host: "https://www.example.com/api",
});
```

--------------------------------

### Register Overlay Portal with useRef and useEffect

Source: https://puckeditor.com/docs/integrating-puck/overlay-portals

Demonstrates how to register an HTML element as an overlay portal using the registerOverlayPortal API from @measured/puck. The hook is called within useEffect with the ref.current element, enabling click interactions on the button within the Puck editor. This pattern allows specific elements to remain interactive when hovering over them in the editor overlay.

```TypeScript
import { registerOverlayPortal } from "@measured/puck";

const Example = () => {
  const ref = useRef<HTMLButtonElement>(null);

  useEffect(() => registerOverlayPortal(ref.current), [ref.current]);

  return (
    <button ref={ref} onClick={() => alert("Click")}>
      Clickable
    </button>
  );
};
```

--------------------------------

### Define Basic Component Categories in Puck Config

Source: https://puckeditor.com/docs/integrating-puck/categories

Create a basic categories configuration object that groups components like HeadingBlock and ParagraphBlock under a typography category. This uses the categories API to organize components in the left sidebar.

```JavaScript
const config = {
  categories: {
    typography: {
      components: ["HeadingBlock", "ParagraphBlock"],
    },
  },
  // ...
};
```

--------------------------------

### Configure Textarea Field with Type

Source: https://puckeditor.com/docs/api-reference/fields/textarea

Basic configuration of a textarea field with the required type parameter. This sets up a simple textarea input that captures multi-line text input from users.

```JavaScript
const config = {
  components: {
    Example: {
      fields: {
        description: {
          type: "textarea",
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Dispatch set State Action in JavaScript

Source: https://puckeditor.com/docs/api-reference/actions

The `set` action provides a way to replace the entire AppState in a single operation. It requires a 'type' property set to 'set' and a 'state' property containing the complete new AppState object, including both data and UI configurations.

```javascript
dispatch({
  type: "set",
  state: { data: {}, ui: {} },
});
```

--------------------------------

### Create Server-Side Component Configuration (TypeScript)

Source: https://puckeditor.com/docs/integrating-puck/server-components

Defines a configuration for the `<Render>` component, intended for server-side use. It utilizes the shared `UserConfig` type but omits fields, as they are not needed during server rendering. The render function is simplified for server execution.

```typescript
import type { UserConfig } from "./puck-types.ts";

export const config: UserConfig = {
  components: {
    HeadingBlock: {
      render: ({ title }) => {
        return (
          <div style={{ padding: 64 }}>
            <h1>{title}</h1>
          </div>
        );
      },
    },
  },
};
```

--------------------------------

### Component with a Drop Zone for Nested Components (JavaScript)

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Configures a component to include a drop zone using 'puck.renderDropZone'. This enables the creation of nested components, allowing for more complex and structured content hierarchies.

```javascript
const config = {
  components: {
    Example: {
      render: ({ puck: { renderDropZone } }) => {
        return <div>{renderDropZone({ zone: "my-content" })}</div>;
      },
    },
  },
};

```

--------------------------------

### Define Slot Field with Basic Configuration

Source: https://puckeditor.com/docs/api-reference/fields/slot

Configure a basic Slot field on a component with a render function that displays nested content. The slot field accepts nested ComponentData and transforms it into a renderable component.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        content: {
          type: "slot",
        },
      },
      render: ({ content: Content }) => {
        return <Content />;
      },
    },
    Card: {
      render: () => <div>Hello, world</div>,
    },
  },
};
```

--------------------------------

### Set Default Props for Puck Root Fields

Source: https://puckeditor.com/docs/integrating-puck/root-configuration

This code illustrates how to set default properties for fields defined in the Puck root configuration. `defaultProps` are stored in the data payload and populate the Puck fields, providing initial values for user inputs like title and description. This differs from default parameters in that it modifies the data payload.

```javascript
const config = {
  // ...
  root: {
    fields: {
      title: { type: "text" },
      description: { type: "textarea" },
    },
    defaultProps: {
      title: "Hello, world",
      description: "Lorem ipsum",
    },
    render: ({ children, title, description }) => {
      return (
        <div>
          <h1>{title}</h1>
          <p>{description}</p>
          {children}
        </div>
      );
    },
  },
};
```

--------------------------------

### Component with Draggable Element using dragRef (JavaScript)

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Demonstrates how to enable inline rendering and make a component draggable by applying the 'puck.dragRef' to an element. This is crucial for advanced CSS layouts and drag-and-drop functionality.

```javascript
const config = {
  components: {
    Example: {
      inline: true,
      render: ({ puck: { dragRef } }) => {
        return <div ref={dragRef}>Hello, world</div>;
      },
    },
  },
};

```

--------------------------------

### Navigate Undo/Redo History with PuckApi history.back

Source: https://puckeditor.com/docs/api-reference/puck-api

Move the app state backward through the undo/redo history stack. This function reverts the application state to the previous recorded state if history exists.

```javascript
history.back(); // Move app state back through histories
```

--------------------------------

### Navigate Forward in Undo/Redo History with PuckApi

Source: https://puckeditor.com/docs/api-reference/puck-api

Move the app state forward through the undo/redo history stack. This function reapplies a previously undone state if future history exists.

```javascript
history.forward(); // Move app state forward through histories
```

--------------------------------

### Puck Editor: Publishing Data

Source: https://puckeditor.com/docs/api-reference/components/puck

The `onPublish` callback is executed when the user clicks the 'Publish' button. This function is typically used to send the current Puck data to a backend API for saving.

```javascript
export function Editor() {
  return (
    <Puck
      onPublish={async (data) => {
        await fetch("/my-api", {
          method: "post",
          body: JSON.stringify({ data }),
        });
      }}
      // ...
    />
  );
}
```

--------------------------------

### Set JSON Schema for Custom Fields

Source: https://puckeditor.com/docs/ai/ai-configuration

This snippet illustrates how to define a JSON schema for custom field types like 'custom', 'external', or user fields. Providing a 'schema' ensures the agent understands the data shape.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "custom",
          ai: {
            schema: { type: "text" },
          },
          render: () => <input />,
        },
      },
      render: ({ title }) => <h1>{title}</h1>,
    },
  },
};
```

--------------------------------

### Puck Slot Allowing Components by Category

Source: https://puckeditor.com/docs/integrating-puck/multi-column-layouts

Demonstrates restricting components within a slot based on predefined categories. The 'content' slot only allows components listed under the 'typography' category.

```javascript
const config = {
  categories: {
    typography: {
      components: ["Card"],
    },
  },
  components: {
    Example: {
      fields: {
        content: {
          type: "slot",
          allow: categories.typography.components,
        },
      },
      render: ({ content: Content }) => {
        return <Content />;
      },
    },
  },
};

```

--------------------------------

### Component with Default Props (JavaScript)

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Sets default properties for a component ('HeadingBlock'). When a new instance of this component is created, it will automatically have the specified 'defaultProps', such as a default 'title'.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "text",
        },
      },
      defaultProps: { title: "Hello, world" },
      render: ({ title }) => <h1>{title}</h1>,
    },
  },
};

```

--------------------------------

### Puck Data Model Structure

Source: https://puckeditor.com/docs/api-reference/data-model/data

This JSON object represents the core data structure of Puck, defining the 'content', 'root', and 'zones'. 'content' holds component instances, 'root' provides configuration for the root element, and 'zones' manages nested content regions.

```json
{
  "content": [
    {
      "type": "HeadingBlock",
      "props": {
        "id": "HeadingBlock-1234",
        "title": "Hello, world"
      }
    }
  ],
  "root": { "props": { "title": "Puck Example" } },
  "zones": {}
}
```

--------------------------------

### Puck Editor: Managing Permissions

Source: https://puckeditor.com/docs/api-reference/components/puck

The `permissions` prop enables fine-grained control over Puck's functionality. Setting `delete` to `false` globally prevents the deletion of any components.

```javascript
export function Editor() {
  return (
    <Puck
      permissions={{
        delete: false, // Prevent deletion of all components
      }}
      // ...
    />
  );
}
```

--------------------------------

### Add Components to Multiple Categories in Puck

Source: https://puckeditor.com/docs/integrating-puck/categories

Configure components to appear in separate categories simultaneously. The same component (like HeadingBlock) can be listed in multiple category groups for different organizational purposes.

```JavaScript
const config = {
  categories: {
    typography: {
      components: ["HeadingBlock", "ParagraphBlock"],
    },
    foundational: {
      components: ["HeadingBlock"],
    },
  },
  // ...
};
```

--------------------------------

### Dispatch setUi Action in JavaScript

Source: https://puckeditor.com/docs/api-reference/actions

The `setUi` action is used to change specific values within Puck's UI state. It requires a 'type' property set to 'setUi' and a 'ui' property containing an object with the UI state modifications, such as controlling sidebar visibility.

```javascript
dispatch({
  type: "setUi",
  ui: {
    leftSideBarVisible: false,
  },
});
```

--------------------------------

### resolveAllData Function

Source: https://puckeditor.com/docs/api-reference/functions/resolve-all-data

Utility function to execute all `resolveData` methods on a data payload outside of the `<Puck>` editor, returning the updated value. This is useful if you need to run your resolvers before passing your data to `<Render>`.

```APIDOC
## resolveAllData

### Description
Utility function to execute all `resolveData` methods on a data payload outside of the `<Puck>` editor, returning the updated value. This is useful if you need to run your resolvers before passing your data to `<Render>`.

### Method
Utility Function

### Endpoint
N/A (Client-side function)

### Parameters
#### Args
- **data** (Data) - Required - The data payload to process.
- **config** (Config) - Required - Configuration object, typically `{ components: {} }`.

### Request Example
```javascript
import { resolveAllData } from "@measured/puck";

const data = {}; // Your data object
const config = { components: {} }; // Your configuration object
const updatedData = await resolveAllData(data, config);
```

### Response
#### Success Response
- **Data** - The updated Data object after resolving all data methods.
```

--------------------------------

### Puck Component with Fluid CSS Grid Layout Slot

Source: https://puckeditor.com/docs/integrating-puck/multi-column-layouts

Creates a fluid layout within a slot by applying CSS Grid properties directly via the 'style' prop. This allows components dropped into the 'content' slot to be arranged using 'gridTemplateColumns'.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        content: {
          type: "slot",
        },
      },
      render: ({ content: Content }) => (
        <Content
          style={{
            display: "grid",
            gridTemplateColumns: "2fr 1fr",
            gap: 16,
          }}
        />
      ),
    },
    Card: {
      render: ({ text }) => <div>{text}</div>,
    },
  },
};

```

--------------------------------

### Load Custom Font File in Puck

Source: https://puckeditor.com/docs/extending-puck/theming/fonts

This snippet shows how to load your own font file by using the `no-external.css` bundle instead of the primary one. This is useful for self-hosting fonts or using custom font versions.

```css
/* @import "@measured/puck/puck.css"; */
@import "@measured/puck/no-external.css";
```

--------------------------------

### Access Application State with PuckApi appState

Source: https://puckeditor.com/docs/api-reference/puck-api

Access the current application state of a Puck instance, which contains the data structure with content, root, and zones properties. This is a read-only reference to the current Puck application state.

```javascript
console.log(appState.data);
// { content: [], root: {}, zones: {} }
```

--------------------------------

### Refresh Permissions by Item

Source: https://puckeditor.com/docs/api-reference/puck-api

Refreshes permissions for a specific component instance by providing its 'item' details. This is useful for targeted permission updates.

```javascript
refreshPermissions({
  item: { type: "HeadingBlock", props: { id: "Heading-1234" } }, // Force refresh the resolved permissions for Heading-1234
});
```

--------------------------------

### Set Default Slot Props with ComponentData (JavaScript)

Source: https://puckeditor.com/docs/integrating-puck/multi-column-layouts

This JavaScript code configures a Puck Editor component to use a slot field and pre-populate it with default properties. The `defaultProps` object specifies an array of `ComponentData` for the 'content' slot, including a 'Card' component with its own props. The `render` function then uses this content.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        content: {
          type: "slot",
        },
      },
      defaultProps: {
        content: [
          {
            type: "Card",
            props: {
              text: "Pre-populated",
            },
          },
        ],
      },
      render: ({ content: Content }) => <Content />,
    },
    Card: {
      render: ({ text }) => <div>{text}</div>,
    },
  },
};
```

--------------------------------

### Implement UI Override with Custom Drawer Item - React/TypeScript

Source: https://puckeditor.com/docs/extending-puck/ui-overrides

Demonstrates how to use the `overrides` prop on the Puck component to render a custom element for each item in the component list. The drawerItem override receives the component name and returns a styled div with a hot pink background. This is a basic implementation showing the structure of override callbacks.

```jsx
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck
      // ...
      overrides={{
        // Render a custom element for each item in the component list
        drawerItem: ({ name }) => (
          <div style={{ backgroundColor: "hotpink" }}>{name}</div>
        ),
      }}
    />
  );
}
```

--------------------------------

### Assign Ref to DropZone Component

Source: https://puckeditor.com/docs/api-reference/components/drop-zone

Demonstrates how to attach a React ref to the root DOM element of a `<DropZone>` component using the `ref` prop, allowing direct access to the DOM node.

```javascript
import React, { useRef } from 'react';

const config = {
  components: {
    Example: {
      render: () => {
        const ref = useRef();
 
        return (
          <div>
            <DropZone zone="my-content" ref={ref} />
          </div>
        );
      },
    },
  },
};

```

--------------------------------

### ActionBar Overrides

Source: https://puckeditor.com/docs/api-reference/overrides/action-bar

This section details how to override the default ActionBar UI using the `<ActionBar>` component. You can extend the default UI by providing custom implementations for actions, labels, and parent selection.

```APIDOC
## ActionBar Overrides

### Description
Override the action bar. Use the `<ActionBar>` component to extend the default ActionBar UI.

### Method
Not Applicable (Component Override)

### Endpoint
Not Applicable (Component Override)

### Parameters
#### Props
- **children** (ReactNode) - Required - A fragment containing the default actions. This should normally be rendered inside an `<ActionBar.Group>`.
- **label** (String) - Required - The default label for the action bar.
- **parentAction** (ReactNode) - Optional - A single `<ActionBar.Action>` to select the current components parent.

### Request Example
```javascript
import { ActionBar } from "@measured/puck";
 
const overrides = {
  actionBar: ({ children, label }) => (
    <ActionBar label={label}>
      <ActionBar.Group>{children}</ActionBar.Group>
    </ActionBar>
  ),
};
```

### Response
#### Success Response (200)
Component override configuration.

#### Response Example
```json
{
  "actionBar": "({ children, label }) => (
    <ActionBar label={label}>
      <ActionBar.Group>{children}</ActionBar.Group>
    </ActionBar>
  )"
}
```
```

--------------------------------

### Component with Inline Rendering Enabled (JavaScript)

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Configures a 'HeadingBlock' component for inline rendering. This removes the default wrapper element, allowing for more flexible layout control, and requires specifying a draggable element via 'puck.dragRef'.

```javascript
const config = {
  components: {
    HeadingBlock: {
      inline: true,
      render: ({ puck }) => <h1 ref={puck.dragRef}>Hello, World</h1>,
    },
  },
};

```

--------------------------------

### Add Placeholder Text to Number Input

Source: https://puckeditor.com/docs/api-reference/fields/number

This snippet demonstrates how to provide placeholder text for a 'number' input field using the 'placeholder' parameter. Placeholder text offers a hint to the user about the expected input format or content. It is displayed when the input field is empty.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        myNumber: {
          type: "number",
          placeholder: "Lorem ipsum...",
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Access Latest Puck API Outside Render Lifecycle using useGetPuck

Source: https://puckeditor.com/docs/extending-puck/internal-puck-api

The `useGetPuck` hook provides access to the latest Puck API state at the time of the call, without causing re-renders when the API changes. This is useful for event handlers or functions that need the current API state. The hook is imported from `@measured/puck`.

```javascript
import { useGetPuck } from "@measured/puck";
import { useCallback } from "react";

const Example = () => {
  const getPuck = useGetPuck();

  const handleClick = useCallback(() => {
    // Get the latest PuckApi value
    const { appState } = getPuck();

    console.log(appState);
  }, [getPuck]);

  return <button onClick={handleClick}>Click me</button>;
};
```

--------------------------------

### Refresh Permissions for Root

Source: https://puckeditor.com/docs/api-reference/puck-api

Refreshes permissions for the root component of the application. This action impacts the entire application's permission state.

```javascript
refreshPermissions({ root: true });
```

--------------------------------

### Refresh Permissions by Type

Source: https://puckeditor.com/docs/api-reference/puck-api

Refreshes permissions for all components of a specified type. This allows for bulk permission updates across similar components.

```javascript
refreshPermissions({ type: "HeadingBlock" });
```

--------------------------------

### Add Placeholder to Text Field

Source: https://puckeditor.com/docs/api-reference/fields/text

Set placeholder text that displays when a text field is empty. The placeholder provides visual guidance to users about what content is expected in the field.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "text",
          placeholder: "Lorem ipsum...",
        },
      },
    },
  },
};
```

--------------------------------

### Configure Number Input Field in Puck Editor

Source: https://puckeditor.com/docs/api-reference/fields/number

This snippet demonstrates how to define and render a 'number' input field within the Puck Editor configuration. It shows the basic structure for a field of type 'number' and how its value is displayed in the render function. Dependencies include React for rendering.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        myNumber: {
          type: "number",
        },
      },
      render: ({ myNumber }) => {
        return <div>{myNumber}</div>;
      },
    },
  },
};
```

--------------------------------

### Set Minimum Value for Number Input

Source: https://puckeditor.com/docs/api-reference/fields/number

This code illustrates how to define a minimum acceptable value for a 'number' input field using the 'min' parameter. This ensures that the user's input does not fall below a certain threshold. The input will not accept values less than the specified minimum.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        myNumber: {
          type: "number",
          min: 0,
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Set Component Permissions in Puck Editor

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Define permissions for component instances to control functionality. These permissions inherit from global settings, allowing granular control over actions like deletion.

```javascript
const config = {
  components: {
    HeadingBlock: {
      permissions: {
        delete: false, // Disable deletion of all HeadingBlock instances
      },
      render: () => <h1>Hello, World</h1>,
    },
  },
};
```

--------------------------------

### Textarea Field with Placeholder Text

Source: https://puckeditor.com/docs/api-reference/fields/textarea

Configures a textarea field with a placeholder string that displays when the field is empty. The placeholder provides helpful guidance to users about expected input.

```JavaScript
const config = {
  components: {
    Example: {
      fields: {
        description: {
          type: "textarea",
          placeholder: "Lorem ipsum...",
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Apply CSS Class to DropZone

Source: https://puckeditor.com/docs/api-reference/components/drop-zone

Illustrates how to add custom CSS classes to the `<DropZone>` component using the `className` prop. This allows for styling the droppable area while retaining default Puck styles.

```javascript
const config = {
  components: {
    Example: {
      render: () => {
        return (
          <div>
            <DropZone zone="my-content" className="MyComponent" />
          </div>
        );
      },
    },
  },
};

```

--------------------------------

### Configure Component Metadata in Puck Editor

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Set additional metadata for components, which is provided to render and resolveData functions. This metadata merges with global metadata, overriding existing keys.

```javascript
const config = {
  components: {
    HeadingBlock: {
      metadata: {
        title: "Hello, world",
      },
      render: ({ puck }) => <h1>{puck.metadata.title}</h1>,
    },
  },
};
```

--------------------------------

### Type-Safe Categories Configuration with TypeScript in Puck

Source: https://puckeditor.com/docs/integrating-puck/categories

Define strongly-typed category names using TypeScript generics with the Config type from @measured/puck. This ensures type safety when working with category definitions and provides better IDE autocompletion.

```TypeScript
import type { Config } from "@measured/puck";

const config: Config<{}, {}, "typography" | "interactive"> = {
  categories: {
    typography: {},
    interactive: {},
  },
  // ...
};
```

--------------------------------

### Base Field Type - Configuration

Source: https://puckeditor.com/docs/api-reference/fields/base

The Base field type defines the core parameters shared across all field types in Puck. It includes optional parameters for labeling, iconography, metadata storage, and visibility control to customize field behavior and presentation.

```APIDOC
## Base Field Type

### Description
The base type shared by all fields in Puck. Provides common configuration options for field customization.

### Parameters

#### Required Parameters
None - all parameters are optional.

#### Optional Parameters
- **label** (String) - Optional - Set the label for the input field. Puck will use the field key if not provided.
- **labelIcon** (ReactNode) - Optional - Set an icon to display next to the field label.
- **metadata** (Object) - Optional - An object containing additional information for the field.
- **visible** (Boolean) - Optional - Show or hide the field. Defaults to `true`.

### Configuration Example

#### Using label parameter
```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          label: "My Field",
          // ... other field configuration
        },
      },
      // ...
    },
  },
};
```

#### Using labelIcon parameter
```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          labelIcon: <Icon />,
          // ... other field configuration
        },
      },
      // ...
    },
  },
};
```

#### Using metadata parameter
```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          metadata: {
            title: "Hello, world",
          },
          // ... other field configuration
        },
      },
      // ...
    },
  },
};
```

#### Using visible parameter
```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          visible: false,
          // ... other field configuration
        },
      },
      // ...
    },
  },
};
```
```

--------------------------------

### Replace DropZone with Slot Field in Puck Component Configuration

Source: https://puckeditor.com/docs/guides/migrations/dropzones-to-slots

Demonstrates how to refactor a Puck component's configuration to use slot fields instead of the deprecated DropZone component. This involves changing the component's structure from a `render` function accepting zone props to one accepting slot props, and defining fields with `type: 'slot'`. Supports defaultProps and resolves data efficiently.

```javascript
const config = {
  components: {
    Example: {
      render: () => {
        return <DropZone zone="items" allow={["HeadingBlock"]} />;
      },
    },
  },
};

// After migration
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "slot",
        },
      },
      defaultProps: {
        items: [], // Slots support defaultProps and other APIs like resolveData
      },
      render: ({ items: Items }) => {
        return <Items allow={["HeadingBlock"]} />;
      },
    },
  },
};

```

--------------------------------

### Configure Puck Preview Component ID (JavaScript/TypeScript)

Source: https://puckeditor.com/docs/api-reference/components/puck-preview

Shows how to set a unique identifier for the Puck.Preview frame using the 'id' prop. This allows for specific targeting or management of multiple preview instances. The default ID is 'puck-preview'.

```javascript
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck>
      <Puck.Preview id="my-frame" />
    </Puck>
  );
}
```

--------------------------------

### Puck Handler with Custom API Key

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/puck-handler

Sets a custom API key for the puckHandler, overriding the default environment variable PUCK_API_KEY. This is useful for managing authentication and authorization with the Puck Cloud service. The code returns a configured handler function.

```javascript
const handler = puckHandler({
  apiKey: process.env.MY_PUCK_KEY,
});
```

--------------------------------

### Modify Chat Stream Configuration with Puck Cloud Client

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/chat

Customizes the chat stream configuration by overriding default component fields and render functions. This allows for specific UI elements and their rendering logic within the chat interface.

```typescript
import { chat } from "@puckeditor/cloud-client";

export async function POST(request) {
  const body = await request.json();

  return chat({
    ...body,
    config: {
      components: {
        HeadingBlock: {
          fields: {
            title: { type: "text" },
          },
          render: ({ title }) => <h1>{title}</h1>,
        },
      },
    },
  });
}
```

--------------------------------

### Custom Field Rendering Function with Params (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/custom

This snippet details the 'render' function used for custom fields in Puck Editor. It shows how the render function receives several parameters, including 'field', 'id', 'name', 'onChange', and 'value', enabling dynamic rendering and state management of the custom input.

```javascript
import { FieldLabel } from "@measured/puck";

const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "custom",
          render: ({ name, onChange, value }) => (
            <input
              defaultValue={value}
              name={name}
              onChange={(e) => onChange(e.currentTarget.value)}
            />
          ),
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Create Custom Field in Puck Editor

Source: https://puckeditor.com/docs/extending-puck/custom-fields

Demonstrates how to create a custom input field in Puck Editor using the 'custom' field type. The 'render' function provides 'name', 'onChange', and 'value' props to manage the input's state and update Puck's data payload.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "custom",
          render: ({ name, onChange, value }) => (
            <input
              defaultValue={value}
              name={name}
              onChange={(e) => onChange(e.currentTarget.value)}
              style={{ border: "1px solid black", padding: 4 }}
            />
          ),
        },
      },
      render: ({ title }) => {
        return <p>{title}</p>;
      },
    },
  },
};
```

--------------------------------

### Set Initial Search Query for External Fields

Source: https://puckeditor.com/docs/api-reference/fields/external

Configure initialQuery to set a default search term when showSearch is enabled. The query value is passed to the fetchList function and used to filter items based on search criteria. Useful for pre-populating searches with common terms.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async ({ query }) => {
            return [
              { title: "Apple", description: "Lorem ipsum 1" },
              { title: "Orange", description: "Lorem ipsum 2" }
            ].filter((item) => {
              // filter logic
            });
          },
          showSearch: true,
          initialQuery: "Apple"
        }
      }
    }
  }
};
```

--------------------------------

### Puck Editor: Configuring Viewports

Source: https://puckeditor.com/docs/api-reference/components/puck

The `viewports` prop defines the available viewport sizes for the editor, rendered within iframes. This configuration includes a single viewport with a width of 1440px.

```javascript
export function Editor() {
  return (
    <Puck
      viewports={[
        {
          width: 1440,
        },
      ]}
      // ...
    />
  );
}
```

--------------------------------

### Monitor Dynamic Permissions with useEffect in PuckApi

Source: https://puckeditor.com/docs/api-reference/puck-api

Use useEffect to update component permissions when they change, since getPermissions is redefined after resolving dynamic permissions. This pattern ensures permissions stay synchronized with resolved values.

```javascript
const [myPermissions, setMyPermissions] = useState(getPermissions());

useEffect(() => {
  setMyPermissions(getPermissions());
}, [getPermissions]);
```

--------------------------------

### Puck Editor: Setting Initial UI State

Source: https://puckeditor.com/docs/api-reference/components/puck

The `ui` prop controls the initial state of the Puck application's user interface. Setting `leftSideBarVisible` to `false` hides the left sidebar by default.

```javascript
export function Editor() {
  return (
    <Puck
      // Hide the left side bar by default
      ui={{ leftSideBarVisible: false }}
      // ...
    />
  );
}
```

--------------------------------

### Component with Custom Label (JavaScript)

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Assigns a custom display name ('Heading Block') to a component. This label is shown within the Puck editor interface, making it easier for users to identify and select components.

```javascript
const config = {
  components: {
    HeadingBlock: {
      label: "Heading Block",
      render: () => <h1>Hello, World</h1>,
    },
  },
};

```

--------------------------------

### Puck Component with Fixed Layout Slots

Source: https://puckeditor.com/docs/integrating-puck/multi-column-layouts

Implements a fixed multi-column layout using two 'slot' fields, 'leftColumn' and 'rightColumn'. The 'render' function uses CSS Grid to arrange the dropped components side-by-side.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        leftColumn: {
          type: "slot",
        },
        rightColumn: {
          type: "slot",
        },
      },
      render: ({ leftColumn: LeftColumn, rightColumn: RightColumn }) => {
        return (
          <div
            style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 16 }}
          >
            <LeftColumn />
            <RightColumn />
          </div>
        );
      },
    },
    Card: {
      render: ({ text }) => <div>{text}</div>,
    },
  },
};
```

--------------------------------

### Set Collision Axis for DropZone

Source: https://puckeditor.com/docs/api-reference/components/drop-zone

Demonstrates configuring the collision detection axis for a `<DropZone>` using the `collisionAxis` prop. Options include 'x', 'y', and 'dynamic', affecting how overlapping elements are handled.

```javascript
const config = {
  components: {
    Example: {
      render: () => {
        return (
          <div>
            <DropZone zone="my-content" collisionAxis="dynamic" />
          </div>
        );
      },
    },
  },
};

```

--------------------------------

### Render Interactive Outline with Puck.Outline (React)

Source: https://puckeditor.com/docs/api-reference/components/puck-outline

Renders an interactive outline of the current data payload when composing a custom Puck UI. This component, Puck.Outline, does not accept any props and is used within the Puck editor context.

```jsx
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck>
      <Puck.Outline />
    </Puck>
  );
}
```

--------------------------------

### Configure Slot Field with Allow Parameter

Source: https://puckeditor.com/docs/api-reference/fields/slot

Restrict which components can be dragged into a slot by specifying an allow list at the field configuration level. This whitelist approach only permits the specified component types.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        content: {
          type: "slot",
          allow: ["HeadingBlock"],
        },
      },
    },
  },
};
```

--------------------------------

### Add Text Input Field to Puck Component Configuration (JavaScript)

Source: https://puckeditor.com/docs/integrating-puck/component-configuration

This code illustrates how to add a 'title' text input field to a Puck component ('HeadingBlock'). The 'fields' parameter defines the input type, and its value is passed as a prop to the 'render' function, allowing user interaction to affect the component's content.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "text",
        },
      },
      render: ({ title }) => {
        return <h1>{title}</h1>;
      },
    },
  },
};
```

--------------------------------

### Puck Component with Inline Slot and Drag Reference

Source: https://puckeditor.com/docs/integrating-puck/multi-column-layouts

Configures a component to render its content directly without a wrapper ('inline: true') and specifies a drag reference using 'puck.dragRef'. This is useful for advanced CSS layouts like grid-column and grid-row manipulation.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        content: {
          type: "slot",
        },
      },
      render: ({ content: Content }) => (
        <Content
          style={{
            display: "grid",
            gridTemplateColumns: "1fr 1fr 1fr 1fr",
            gridTemplateRows: "1fr 1fr 1fr 1fr",
            gap: 16,
          }}
        />
      ),
    },
    Card: {
      inline: true, 
      render: ({ text, spanCol, spanRow, puck }) => (
        <div
          ref={puck.dragRef} 
          style={{
            gridColumn: `span ${spanCol}`,
            gridRow: `span ${spanRow}`,
          }}
        >
          {text}
        </div>
      ),
    },
  },
};

```

--------------------------------

### Override Component Overlay in Puck Editor (JavaScript)

Source: https://puckeditor.com/docs/api-reference/overrides/component-overlay

This JavaScript snippet demonstrates how to override the default overlay behavior for components in Puck Editor. It defines a `overrides` object with a custom `overlay` function, which accepts children and can be used to wrap them in custom JSX. This is useful for customizing the visual feedback when hovering or selecting components.

```javascript
const overrides = {
  overlay: ({ children }) => <div>{children}</div>,
};
```

--------------------------------

### Puck AI Array Field Configuration

Source: https://puckeditor.com/docs/api-reference/fields/array

Defines an array field named 'items' with a nested 'title' field. This configuration allows for rendering a list of items, where each item has a text-based title. It includes the basic structure for setting up an array field and its child fields.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
        },
      },
      render: ({ items }) => {
        return (
          <ul>
            {items.map((item, i) => (
              <li key={i}>{item.title}</li>
            ))}
          </ul>
        );
      },
    },
  },
};
```

--------------------------------

### Log Selected Item

Source: https://puckeditor.com/docs/api-reference/puck-api

Logs the currently selected item from the application state to the console. This is helpful for debugging UI interactions and state tracking.

```javascript
console.log(selectedItem);
// { type: "Heading", props: {id: "my-heading"} }
```

--------------------------------

### Use useGetPuck Hook to Retrieve Latest PuckApi State

Source: https://puckeditor.com/docs/api-reference/functions/use-get-puck

The useGetPuck hook from '@measured/puck' provides a function to access the most recent PuckApi state. This is crucial for scenarios like event handlers or asynchronous operations where the component's render state might not be immediately available. It returns a function that, when called, gives you the current 'appState' from the PuckApi.

```javascript
import { useGetPuck } from "@measured/puck";
import { useCallback } from "react";

const Example = () => {
  const getPuck = useGetPuck();
 
  const handleClick = useCallback(() => {
    // Current PuckApi is always provided
    const { appState } = getPuck();
  }, [getPuck]);
 
  return <button onClick={handleClick}>Click me</button>;
};

```

--------------------------------

### Puck Editor: Handling Data Changes

Source: https://puckeditor.com/docs/api-reference/components/puck

The `onChange` callback is invoked whenever the user modifies the Puck data. It receives the updated data object, which can be used for logging or other data processing.

```javascript
export function Editor() {
  return (
    <Puck
      onChange={(data) => {
        console.log("Puck data was updated", data);
      }}
      // ...
    />
  );
}
```

--------------------------------

### Resolve Permissions Asynchronously from Server

Source: https://puckeditor.com/docs/integrating-puck/feature-toggling

Query permissions from an external API endpoint asynchronously whenever component data changes. This enables server-side permission logic and centralized access control. The resolver receives component data and can make async calls to fetch permissions.

```javascript
const config = {
  components: {
    HeadingBlock: {
      resolvePermissions: async (data) => {
        const serverPermissions = await myPermissionsApi(data.props.id); // Query permissions from a server
 
        return serverPermissions;
      },
      // ...
    },
  },
};
```

--------------------------------

### ComponentData Object Structure

Source: https://puckeditor.com/docs/api-reference/data-model/component-data

This JSON object represents an instance of a component within the Puck editor. It includes the component's type and its associated properties.

```json
{
  "type": "HeadingBlock",
  "props": {
    "id": "HeadingBlock-1234",
    "title": "Hello, world"
  }
}
```

--------------------------------

### Refresh Permissions and Clear Cache in PuckApi

Source: https://puckeditor.com/docs/api-reference/puck-api

Force the permissions system to refresh by running all resolvePermissions functions and bypassing the cache. This ensures all dynamic permissions are recalculated.

```javascript
refreshPermissions(); // Refresh all permissions
```

--------------------------------

### Configure Select Field Type - JavaScript

Source: https://puckeditor.com/docs/api-reference/fields/select

Illustrates the required 'type' parameter for a select field in Puck Editor. This parameter must be set to 'select' to specify that the field should render as a dropdown selection element. This ensures the correct input component is used.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        textAlign: {
          type: "select",
          options: [
            { label: "Left", value: "left" },
            { label: "Right", value: "right" },
          ],
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Radio Input Type Configuration (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/radio

This snippet focuses on the essential 'type' parameter for the radio input. It confirms that the 'type' must be set to 'radio' to render a radio button group. This is a required parameter for defining a radio field.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        textAlign: {
          type: "radio",
          options: [
            { label: "Left", value: "left" },
            { label: "Right", value: "right" },
          ],
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Implement fetchList Async Function

Source: https://puckeditor.com/docs/api-reference/fields/external

Defines the fetchList function that returns a promise resolving to an array of objects. The returned data is rendered in a table format, supporting only string and number property values for display.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async () => {
            // ... fetch data from a third party API, or other async source

            return [
              { title: "Hello, world", description: "Lorem ipsum 1" },
              { title: "Goodbye, world", description: "Lorem ipsum 2" },
            ];
          },
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Override Drag-and-Drop Preview (React)

Source: https://puckeditor.com/docs/api-reference/overrides/preview

Customize the drag-and-drop preview by providing a React component. The `children` prop represents the default preview node, which can be wrapped or replaced entirely. This allows for visual modifications to how elements appear during drag-and-drop operations within the editor.

```javascript
const overrides = {
  preview: ({ children }) => <div>{children}</div>,
};
```

--------------------------------

### Apply Style Attribute in Puck Editor Component

Source: https://puckeditor.com/docs/api-reference/fields/slot

Demonstrates how to apply a style attribute to a component's slot in Puck Editor. This allows for custom styling while retaining default styles. It takes a style object as input.

```javascript
const config = {
  components: {
    Example: {
      render: ({ content: Content }) => {
        return <Content style={{ display: "flex" }} />;
      },
    },
  },
};

```

--------------------------------

### Render ActionBar Group with Multiple Groups - JSX

Source: https://puckeditor.com/docs/api-reference/components/action-bar-group

Demonstrates how to create an ActionBar with multiple nested ActionBar.Group components. Each group renders as a distinct section within the ActionBar, with children rendered in a flex row layout. Typically used to organize related actions in a toolbar interface.

```jsx
<ActionBar label="Actions">
  <ActionBar.Group>Group 1</ActionBar.Group>
  <ActionBar.Group>Group 2</ActionBar.Group>
</ActionBar>
```

--------------------------------

### walkTree: Recursively Traverse and Modify Puck Data

Source: https://puckeditor.com/docs/api-reference/functions/walk-tree

The walkTree function allows for recursive traversal of Puck data structures. It accepts data, configuration, and a callback function to modify content within slots. The callback receives slot content and options, and can return updated content to modify the data structure.

```javascript
import { walkTree } from "@measured/puck";

// Add the example prop to all children in the data
const newData = walkTree(data, config, (content) =>
  content.map((child) => ({
    ...child,
    props: { ...child.props, example: "Hello, world" },
  }))
);

console.log(newData);
```

--------------------------------

### Provide Custom Schema for Custom Field with AI (JavaScript)

Source: https://puckeditor.com/docs/api-reference/ai/configuration/fields

This code demonstrates how to define a custom JSON schema for a 'custom' type field, 'title' in 'HeadingBlock', when using AI. This is useful when Puck AI cannot infer the schema automatically.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "custom",
          render: () => <input />,
          ai: {
            schema: { type: "text" },
          },
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Puck Editor Header Title Configuration

Source: https://puckeditor.com/docs/api-reference/components/puck

Demonstrates how to set a custom title for the header of the Puck editor using the `headerTitle` prop. This allows for branding or identifying the specific page being edited.

```javascript
export function Editor() {
  return (
    <Puck
      headerTitle="My page"
      // ...
    />
  );
}
```

--------------------------------

### Dynamically Set Component Fields with resolveFields in Puck Editor

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Use the resolveFields function to dynamically define the fields available for a component. This function supports asynchronous operations and is triggered when component data changes.

```javascript
const config = {
  components: {
    MyComponent: {
      resolveFields: (data) => {
        const fields = {
          drink: {
            type: "radio",
            options: [
              { label: "Water", value: "water" },
              { label: "Orange juice", value: "orange-juice" },
            ],
          },
        };
 
        if (data.props.drink === "water") {
          return {
            ...fields,
            waterType: {
              // ... Define field
            },
          };
        }
 
        return fields;
      },
      // ...
    },
  },
};
```

--------------------------------

### Override Puck Editor's ActionBar with React

Source: https://puckeditor.com/docs/api-reference/overrides/action-bar

This code snippet shows how to customize the action bar in Puck Editor by using the `<ActionBar>` component. It expects React and the `@measured/puck` library. The output is a modified ActionBar component with custom children.

```javascript
import { ActionBar } from "@measured/puck";
 
const overrides = {
  actionBar: ({ children, label }) => (
    <ActionBar label={label}>
      <ActionBar.Group>{children}</ActionBar.Group>
    </ActionBar>
  ),
};
```

--------------------------------

### Puck AI Array Field: Optional GetItemSummary Function

Source: https://puckeditor.com/docs/api-reference/fields/array

Demonstrates the optional 'getItemSummary' function for providing a custom label or summary for each item in an array. This function helps in identifying array items in the UI, especially when items are dynamically generated or have complex data. It returns the item's title or a default.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
          getItemSummary: (item) => item.title || "Item",
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Define Shared Configuration Types (TypeScript)

Source: https://puckeditor.com/docs/integrating-puck/server-components

Defines a shared configuration type for Puck components, including custom props. This type serves as a contract for both client and server configurations, ensuring consistency. It relies on the `@measured/puck` library for its `Config` type.

```typescript
import type { Config } from "@measured/puck";

type Props = {
  HeadingBlock: {
    title: string;
  };
};

export type UserConfig = Config<Props>;
```

--------------------------------

### Override Components Override

Source: https://puckeditor.com/docs/api-reference/overrides/components

Customize the component list rendering in Puck Editor by providing an override function that wraps the default children component. This allows you to add custom styling, behavior, or structure to the component list interface.

```APIDOC
## Override Components

### Description
Override the default component list rendering in Puck Editor with a custom component wrapper.

### Usage
This override allows you to customize how the component list is displayed and structured within the editor interface.

### Implementation
```typescript
const overrides = {
  components: ({ children }) => <div>{children}</div>,
};
```

### Props

#### children
- **Type**: ReactNode
- **Required**: Yes
- **Description**: The default node for the component list. This is the standard component list that you can wrap with custom JSX to apply custom styling, layouts, or additional functionality.

### Example
```typescript
const customOverrides = {
  components: ({ children }) => (
    <div className="custom-component-list">
      {children}
    </div>
  ),
};
```

### Related Overrides
- **componentItem**: Customize individual component items in the list
- **fieldLabel**: Customize field labels in the editor
```

--------------------------------

### Apply Custom Inline Styles to Slot

Source: https://puckeditor.com/docs/api-reference/fields/slot

Pass CSS properties via the style prop to customize the slot's appearance. These styles are applied in addition to Puck's default styling.

```javascript
const config = {
  components: {
    Example: {
      render: ({ content: Content }) => {
        return <Content style={{ display: "flex" }} />;
      },
    },
  },
};
```

--------------------------------

### setUi Action

Source: https://puckeditor.com/docs/api-reference/actions

Change a value on Puck's UI state. This action allows you to modify UI-related state properties such as sidebar visibility and other interface elements.

```APIDOC
## setUi Action

### Description
Change a value on Puck's UI state.

### Action Type
setUi

### Parameters
- **type** (string) - Required - Action type identifier: "setUi"
- **ui** (UiState) - Required - The UI state object with properties to update

### Request Example
```javascript
dispatch({
  type: "setUi",
  ui: {
    leftSideBarVisible: false
  }
});
```

### UI State Properties
- **leftSideBarVisible** (boolean) - Controls the visibility of the left sidebar

### Response
The action updates Puck's UI state and re-renders the interface with the new UI configuration.
```

--------------------------------

### Resolve Fields Dynamically in JavaScript

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

The `resolveFields` function allows for dynamic determination of component fields based on changed props. It accepts `props` and `changed` objects as arguments. If `changed.fieldType` is false, it returns `lastFields`; otherwise, it returns a new field object with a `title` of type `fieldType`.

```javascript
const resolveFields = async ({ props }, { changed, lastFields }) => {
  if (!changed.fieldType) {
    return lastFields;
  }
 
  return {
    title: {
      type: fieldType,
    },
  };
};
```

--------------------------------

### Set Puck Interface Font Family (CSS)

Source: https://puckeditor.com/docs/api-reference/theming

This snippet demonstrates how to set the primary font family for the Puck interface using the `--puck-font-family` CSS variable. It requires importing the `no-external.css` bundle to prevent conflicts with the default font.

```css
/* Load bundle without existing font */
@import "@measured/puck/no-external.css";

:root {
  --puck-font-family: Arial;
}
```

--------------------------------

### Set Minimum Empty Height for DropZone

Source: https://puckeditor.com/docs/api-reference/components/drop-zone

Shows how to define the minimum height of an empty `<DropZone>` in pixels using the `minEmptyHeight` prop. The default value is 128 pixels.

```javascript
const config = {
  components: {
    Example: {
      render: () => {
        return (
          <div>
            <DropZone zone="my-content" minEmptyHeight=256 />
          </div>
        );
      },
    },
  },
};

```

--------------------------------

### Define Custom Header Override in Puck Editor

Source: https://puckeditor.com/docs/api-reference/overrides

Demonstrates how to define a custom header component using the overrides API in Puck Editor. This requires React and the Puck library. The input is an object where the 'header' key is assigned a function that returns a React element.

```javascript
const overrides = {
  header: () => <header>My header</header>,
};
```

--------------------------------

### Override fields Wrapper Component in Puck Editor

Source: https://puckeditor.com/docs/api-reference/overrides/fields

Create a custom fields wrapper by defining an override in the overrides configuration object. The fields function receives children (the default fields node) and returns a ReactNode. This enables customization of how fields are rendered and structured in the editor interface.

```javascript
const overrides = {
  fields: ({ children }) => <div>{children}</div>,
};
```

--------------------------------

### Set Current History Index in PuckApi

Source: https://puckeditor.com/docs/api-reference/puck-api

Jump to a specific point in the undo/redo history by setting the history index. This allows direct navigation to any recorded state in the history array.

```javascript
setHistoryIndex(2);
```

--------------------------------

### ItemSelector Object Structure - Puck Data Model

Source: https://puckeditor.com/docs/api-reference/data-model/item-selector

Defines the structure of an ItemSelector object used to describe item locations in Puck data. The index parameter is required and specifies the numeric position of an item. The zone parameter is optional and uses a colon-separated format combining component ID and slot field name. When zone is not provided, it defaults to 'root:default-zone'.

```json
{
  "index": 0,
  "zone": "Flex-123:children"
}
```

--------------------------------

### Configure External Field Type with fetchList

Source: https://puckeditor.com/docs/api-reference/fields/external

Sets up an external field that fetches data from an async source and renders selected item in component. The fetchList function returns an array of objects with string/number properties for tabular display. The render function accesses selected data via the field name.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async () => {
            // ... fetch data from a third party API, or other async source

            return [
              { title: "Hello, world", description: "Lorem ipsum 1" },
              { title: "Goodbye, world", description: "Lorem ipsum 2" },
            ];
          },
        },
      },
      render: ({ data }) => {
        return <p>{data?.title || "No data selected"}</p>;
      },
    },
  },
};
```

--------------------------------

### Configure Array Field with Minimum Items - JavaScript

Source: https://puckeditor.com/docs/api-reference/fields/array

Sets up a PuckEditor component with an array field that enforces a minimum of 1 item. The `min` property restricts the array to contain at least the specified number of elements. This configuration requires the `type` and `arrayFields` properties to define the array structure and item schema.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "array",
          arrayFields: {
            title: { type: "text" },
          },
          min: 1,
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Syncing External Data with 'resolveData' and 'external' Field

Source: https://puckeditor.com/docs/integrating-puck/external-data-sources

This code snippet illustrates how to keep data in sync with its external source using the 'external' field type in conjunction with the `resolveData` function. It re-fetches content when the page loads or `resolveAllData` is called. The `resolveData` function ensures that the specific item data is re-queried from the API only if the selected item's ID has changed, preventing unnecessary API calls.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async () => {
            // Query an API for a list of items
            const items = await fetch(`/api/items`).then((res) => res.json());
            // [
            //   { title: "Hello, world", id: 0 },
            //   { title: "Goodbye, world", id: 1 },
            // ];
 
            return items;
          },
        },
      },
      resolveData: async ({ props }, { changed }) => {
        if (!props.data) return { props };
 
        // Don't query unless `data` has changed since resolveData was last run
        if (!changed.data) return { props };
 
        // Re-query the API for a particular item
        const latestData = await fetch(`/api/items/${props.data.id}`).then(
          (res) => res.json()
        );
        // { title: "Hello, world", description: "Lorem ipsum 1", id: 0 }
 
        return {
          props: {
            // Update the value for `data`
            data: latestData,
          },
        };
      },
      // ...
    },
  },
};

```

--------------------------------

### Override Puck Editor Drawer Component with JavaScript

Source: https://puckeditor.com/docs/api-reference/overrides/drawer

This snippet demonstrates how to override the default drawer component in the Puck Editor. It allows for custom rendering of the drawer's content by providing a new React component. This customization is useful for integrating custom UI elements or modifying the drawer's behavior.

```javascript
const overrides = {
  drawer: ({ children }) => <div>{children}</div>,
};
```

--------------------------------

### Enable Search Input for Data Fetching in Puck Editor

Source: https://puckeditor.com/docs/api-reference/fields/external

Enables a search input field within the component's interface. The value entered by the user is passed as the 'query' parameter to the `fetchList` function, allowing for dynamic data filtering. This is configured within the 'external' data type.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async ({ query }) => {
            return [
              { title: "Apple", description: "Lorem ipsum 1" },
              { title: "Orange", description: "Lorem ipsum 2" },
            ].filter((item) => {
              // ...
            });
          },
          showSearch: true,
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Use Slot Type with TypeScript

Source: https://puckeditor.com/docs/api-reference/fields/slot

Import and apply the Slot type annotation to ensure proper type checking and transformation of ComponentData arrays into render functions in TypeScript projects.

```typescript
import { Slot } from "@measured/puck";

type Props = {
  Example: {
    content: Slot; // Converted from the ComponentData[] type into a render function
  };
};
```

--------------------------------

### Configure Slot Field with Disallow Parameter

Source: https://puckeditor.com/docs/api-reference/fields/slot

Exclude specific components from being dragged into a slot using the disallow parameter. Components in the allow list will override disallow settings.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        content: {
          type: "slot",
          disallow: ["HeadingBlock"],
        },
      },
    },
  },
};
```

--------------------------------

### FieldLabel: Add an icon before the label text

Source: https://puckeditor.com/docs/api-reference/components/field-label

The 'icon' prop accepts a ReactNode to render an icon before the label text. Puck internally uses lucide-react for icons.

```jsx
import { FieldLabel } from "@measured/puck";
import { Globe } from "lucide-react";
 
const CustomField = () => (
  <FieldLabel icon={<Globe size="16" />} label="Title">
    <input />
  </FieldLabel>
);
 
// ...
```

--------------------------------

### FieldLabel: Set label text

Source: https://puckeditor.com/docs/api-reference/components/field-label

The 'label' prop is a required string that defines the text displayed for the field label. This is essential for accessibility and user understanding.

```jsx
import { FieldLabel } from "@measured/puck";
 
const CustomField = () => (
  <FieldLabel label="Title">
    <input />
  </FieldLabel>
);
 
// ...
```

--------------------------------

### Render a styled label for custom fields using FieldLabel

Source: https://puckeditor.com/docs/api-reference/components/field-label

The FieldLabel component renders a styled label for custom fields. It requires a 'label' prop and accepts children, className, el, icon, and readOnly props for customization. The 'el' prop can switch the rendered element between 'label' and 'div'.

```jsx
import { FieldLabel } from "@measured/puck";
 
const CustomField = () => (
  <FieldLabel label="Title">
    <input />
  </FieldLabel>
);
 
const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "custom",
          render: MyCustomField,
        },
      },
    },
  },
};
```

--------------------------------

### Add Label Icon to Field in Puck Editor (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/base

This snippet shows how to associate an icon with a field's label using the 'labelIcon' parameter. This enhances the visual representation of the field in the editor interface.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          labelIcon: <Icon />,
          // ...
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Optimize Async Permission Resolution with Change Detection

Source: https://puckeditor.com/docs/integrating-puck/feature-toggling

Prevent expensive asynchronous permission API calls by checking which component props have changed. Uses the changed parameter to only invoke expensive operations when relevant props are modified, and returns cached permissions from lastPermissions otherwise.

```javascript
const config = {
  components: {
    HeadingBlock: {
      // ...
      resolvePermissions: async (data, { changed, lastPermissions }) => {
        if (!changed.locked) return lastPermissions; // Return last permissions if `locked` hasn't changed
 
        return await myExpensivePermissionsApi(data),
      },
      // ...
    },
  },
};
```

--------------------------------

### Exclude Components from Slot at Render-Time

Source: https://puckeditor.com/docs/api-reference/fields/slot

Use the disallow prop in the render function to dynamically prevent specific components from being dragged into the slot. Allow list takes precedence over disallow.

```javascript
const config = {
  components: {
    Example: {
      render: ({ content: Content }) => {
        return <Content disallow={["HeadingBlock"]} />;
      },
    },
  },
};
```

--------------------------------

### Override iframe root element with useEffect in React

Source: https://puckeditor.com/docs/api-reference/overrides/iframe

This code snippet demonstrates how to override the root of an iframe using React's `useEffect` hook. It allows you to directly manipulate the iframe's document, such as setting inline styles on the body. The `document` object is provided by the override, and `children` represents the default iframe content.

```javascript
const overrides = {
  iframe: ({ children, document }) => {
    useEffect(() => {
      if (document) {
        document.body.setAttribute("style", "background: hotpink;");
      }
    }, [document]);
 
    return <>{children}</>;
  },
};

```

--------------------------------

### Render Custom Field with Autofield - JavaScript

Source: https://puckeditor.com/docs/api-reference/components/auto-field

Demonstrates how to use the Autofield component to render a Puck field, specifically a custom text field, within a React component. It shows the basic structure for defining components and their fields with custom renderers.

```javascript
import { Autofield } from "@measured/puck";

const CustomField = ({ onChange, value }) => (
  <AutoField field={{ type: "text" }} onChange={onChange} value={value} />
);

const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "custom",
          render: MyCustomField,
        },
      },
    },
  },
};
```

--------------------------------

### Override Slot Filtering at Render-Time

Source: https://puckeditor.com/docs/api-reference/fields/slot

Pass allow parameter to the Content render function to override field-level configuration. This enables dynamic component filtering based on render-time logic.

```javascript
const config = {
  components: {
    Example: {
      render: ({ content: Content }) => {
        return <Content allow={["HeadingBlock"]} />;
      },
    },
  },
};
```

--------------------------------

### Attach React Ref to Slot Root Node

Source: https://puckeditor.com/docs/api-reference/fields/slot

Use the ref prop to attach a React reference to the root node of the slot, enabling direct DOM access and manipulation from the component.

```javascript
const config = {
  components: {
    Example: {
      render: ({ content: Content }) => {
        const ref = useRef();

        return <Content ref={ref} />;
      },
    },
  },
};
```

--------------------------------

### Customize Category Title, Collapse State, and Visibility in Puck

Source: https://puckeditor.com/docs/integrating-puck/categories

Modify category display properties including custom titles, default collapse state, and visibility toggle. This allows fine-grained control over how categories appear in the component sidebar.

```JavaScript
const config = {
  categories: {
    typography: {
      components: ["HeadingBlock", "ParagraphBlock"],
      title: "Text",
      defaultExpanded: false, // Collapse this category by default
    },
    foundational: {
      components: ["HeadingBlock"],
      visible: false, // Mark this category as hidden
    },
  },
  // ...
};
```

--------------------------------

### Control Field Visibility in Puck Editor (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/base

This code demonstrates how to control the visibility of a field using the 'visible' parameter. Setting it to 'false' will hide the field from the user interface. It defaults to 'true'.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          visible: false,
          // ...
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Configure the 'Other' Category for Uncategorized Components in Puck

Source: https://puckeditor.com/docs/integrating-puck/categories

Customize the default 'other' category that automatically groups any uncategorized components. This category respects the same API as regular categories and is visible by default.

```JavaScript
const config = {
  categories: {
    typography: {
      components: ["HeadingBlock", "ParagraphBlock"],
    },
    other: {
      title: "Other components",
    },
  },
  // ...
};
```

--------------------------------

### Apply Custom CSS Class to Slot

Source: https://puckeditor.com/docs/api-reference/fields/slot

Add a className prop to the Content render function to apply custom styling. Default Puck styles are preserved while additional classes are applied.

```javascript
const config = {
  components: {
    Example: {
      render: ({ content: Content }) => {
        return <Content className="MyComponent" />;
      },
    },
  },
};
```

--------------------------------

### Modify Chat Stream Page Data with Puck Cloud Client

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/chat

Adjusts the page data used in the chat stream, allowing for modifications to the root properties and content structure. This is useful for pre-populating or altering the page context for the AI.

```typescript
import { chat } from "@puckeditor/cloud-client";

export async function POST(request) {
  const body = await request.json();

  return chat({
    ...body,
    pageData: {
      root: { props: { title: "My page" } },
      content: [],
    },
  });
}
```

--------------------------------

### Dispatch setData Action in JavaScript

Source: https://puckeditor.com/docs/api-reference/actions

The `setData` action allows modification of the data payload managed by Puck. It requires a 'type' property set to 'setData' and a 'data' property containing the new data. This is a core function for updating content within the editor.

```javascript
dispatch({
  type: "setData",
  data: {},
});
```

--------------------------------

### FieldLabel: Render as a div or label element

Source: https://puckeditor.com/docs/api-reference/components/field-label

The 'el' prop allows you to specify the HTML element to render for the label, defaulting to 'label'. You can change it to 'div' by passing `el="div"`.

```jsx
import { FieldLabel } from "@measured/puck";
 
const CustomField = () => (
  <FieldLabel el="div" label="Title">
    <input />
  </FieldLabel>
);
 
// ...
```

--------------------------------

### FieldLabel: Apply custom CSS class

Source: https://puckeditor.com/docs/api-reference/components/field-label

Use the 'className' prop to apply custom CSS classes to the FieldLabel component, enabling further styling and layout control.

```jsx
import { FieldLabel } from "@measured/puck";
 
const CustomField = () => (
  <FieldLabel className="MyClass" label="Title">
    <input />
  </FieldLabel>
);
 
// ...
```

--------------------------------

### Interactive Editable Text Field with Overlay Portals in React

Source: https://puckeditor.com/docs/extending-puck/field-transforms

Combine field transforms with Overlay Portals to create interactive inline text editing. Uses registerOverlayPortal and contentEditable to enable direct editing of text field values within the editor.

```jsx
import { registerOverlayPortal } from "@measured/puck";
 
const EditableText = ({ value }) => {
  const ref = useRef(null);
 
  useEffect(() => {
    if (ref.current) {
      // Register the element as an overlay portal
      registerOverlayPortal(ref.current);
    }
  }, [ref.current]);
 
  return (
    // Mark the element as editable for inline text editing
    <p ref={ref} contentEditable>
      {value}
    </p>
  );
};
 
const fieldTransforms = {
  text: EditableText,
};
 
const Example = () => <Puck fieldTransforms={fieldTransforms} />;
```

--------------------------------

### Set Initial Filter Values for External Fields

Source: https://puckeditor.com/docs/api-reference/fields/external

Configure initialFilters to set default filter values when the component renders. These values are passed to the fetchList function on initial load and persist until the user modifies them. Works in conjunction with filterFields definitions.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async ({ filters }) => {
            return [
              { title: "Apple", description: "Lorem ipsum 1", rating: 5 },
              { title: "Orange", description: "Lorem ipsum 2", rating: 3 }
            ].filter((item) => item.rating >= (filters.rating || 0));
          },
          filterFields: {
            rating: {
              type: "number"
            }
          },
          initialFilters: {
            rating: 1
          }
        }
      }
    }
  }
};
```

--------------------------------

### Implement Custom Field UI in Puck (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/custom

This snippet demonstrates how to implement a custom field in Puck Editor. It defines a component with a custom field named 'title' that uses an input element for rendering. The 'render' function receives field properties like 'name', 'onChange', and 'value' to manage the input's state and updates.

```javascript
import { FieldLabel } from "@measured/puck";

const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "custom",
          render: ({ name, onChange, value }) => (
            <input
              defaultValue={value}
              name={name}
              onChange={(e) => onChange(e.currentTarget.value)}
            />
          ),
        },
      },
      render: ({ title }) => {
        return <p>{title}</p>;
      },
    },
  },
};

```

--------------------------------

### Text Field Type Declaration

Source: https://puckeditor.com/docs/api-reference/fields/text

Required configuration for declaring a text field type in Puck component. The type parameter must be set to 'text' to properly define the field as a text input.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "text",
        },
      },
    },
  },
};
```

--------------------------------

### Override Puck Editor componentItem

Source: https://puckeditor.com/docs/api-reference/overrides/component-item

Allows customization of individual items within a component list. It accepts a function that receives item properties like `name` and returns a ReactNode for rendering. This is useful for custom styling or behavior of list items.

```javascript
const overrides = {
  componentItem: ({ name }) => <div>{name}</div>,
};
```

--------------------------------

### Override Header Actions with Custom Button - React/JavaScript

Source: https://puckeditor.com/docs/api-reference/overrides/header-actions

Demonstrates how to override the headerActions property in Puck Editor to add a custom button alongside the default header actions. The override accepts a children prop containing the default publish button and returns a React fragment with both the default children and a custom button element.

```javascript
const overrides = {
  headerActions: ({ children }) => (
    <>
      {children}
      <button>Click me</button>
    </>
  ),
};
```

--------------------------------

### Modify Chat Stream Messages with Puck Cloud Client

Source: https://puckeditor.com/docs/api-reference/ai/cloud-client/chat

Manages the message history within the chat stream by providing a custom array of `UIMessage` objects. This enables control over the conversation context and AI's understanding of the user's intent.

```typescript
import { chat } from "@puckeditor/cloud-client";

export async function POST(request) {
  const body = await request.json();

  return chat({
    ...body,
    messages: [
      {
        id: "message-id",
        role: "user",
        parts: [{ text: "Create a landing page about dogs" }],
      },
    ],
  });
}
```

--------------------------------

### Dynamically Resolve Component Data with resolveData in Puck Editor

Source: https://puckeditor.com/docs/api-reference/configuration/component-config

Use the resolveData function to dynamically modify component props and set fields as read-only. Supports asynchronous operations and is triggered on render, field changes, or explicit calls.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "text",
        },
      },
      resolveData: async ({ props }) => {
        return {
          props: { resolvedTitle: props.title },
          readOnly: { resolvedTitle: true },
        };
      },
      render: ({ resolvedTitle }) => <h1>{resolvedTitle}</h1>,
    },
  },
};
```

```javascript
const resolveData = async ({ props }) => {
  return {
    props: { resolvedTitle: props.title },
  };
};
```

```javascript
const resolveData = async ({ props }, { changed }) => {
  if (!changed.title) {
    return { props };
  }
 
  return {
    props: { resolvedTitle: props.title },
  };
};
```

```javascript
const resolveData = async ({ props }, { metadata }) => {
  return {
    props: { title: metadata.title || props.title },
  };
};
```

```javascript
const resolveData = async ({ props }) => {
  return {
    props: { resolvedTitle: props.title },
  };
};
```

```javascript
const resolveData = async ({ props }) => {
  return {
    props: { resolvedTitle: props.title },
    readOnly: { resolvedTitle: true }, // Make the `resolvedTitle` field read-only
  };
};
```

--------------------------------

### Use setDeep to Modify Nested Object Properties (JavaScript)

Source: https://puckeditor.com/docs/api-reference/functions/set-deep

Demonstrates how to use the `setDeep` utility function to update a value at a specific, deeply nested path within a JavaScript object. This function is useful for scenarios like field transformations in UI development. It takes the input object, the path string, and the new value as arguments.

```javascript
import { setDeep } from "@measured/puck";
 
const newData = setDeep(
  {
    object: {
      array: [{ key: "Hello, world" }],
    },
  },
  "object.array[0].key",
  "Goodbye, world"
);
 
console.log(newData);
// {
//   object: {
//     array: [{ key: "Goodbye, world" }],
//   },
// }
```

--------------------------------

### Add Label to Custom Field in Puck Editor

Source: https://puckeditor.com/docs/extending-puck/custom-fields

Shows how to add a custom label to a Puck Editor field using the 'label' property and integrating with Puck's `<FieldLabel>` component for seamless UI integration. The 'render' function receives 'field' which contains the 'label'.

```javascript
import { FieldLabel } from "@measured/puck";
 
const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "custom",
          label: "Label Example",
          render: ({ field }) => (
            <FieldLabel label={field.label}>
              <input {/*...*/} />
            </FieldLabel>
          ),
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Override drawerItem Component in Puck Editor

Source: https://puckeditor.com/docs/api-reference/overrides/drawer-item

Demonstrates how to override the default rendering of a drawer item within Puck Editor. This allows for custom display of item names or other elements. It requires the React library.

```javascript
const overrides = {
  drawerItem: ({ name }) => <div>{name}</div>,
};
```

--------------------------------

### Clear All History with setHistories in PuckApi

Source: https://puckeditor.com/docs/api-reference/puck-api

Clear the entire undo/redo history by passing an empty array to setHistories. This removes all recorded history entries and resets the history state.

```javascript
setHistories([]); // clears all history
```

--------------------------------

### setData Action

Source: https://puckeditor.com/docs/api-reference/actions

Modify the data payload currently managed by Puck. This action allows you to update the internal data state by providing a new data object to the dispatcher.

```APIDOC
## setData Action

### Description
Modify the data payload currently managed by Puck.

### Action Type
setData

### Parameters
- **type** (string) - Required - Action type identifier: "setData"
- **data** (Data) - Required - The data payload object to update

### Request Example
```javascript
dispatch({
  type: "setData",
  data: {}
});
```

### Usage
Use this action when you need to update the data managed by Puck's internal state. Pass an empty object or your modified data structure as the data parameter.

### Response
The action updates Puck's internal data state and triggers a re-render of affected components.
```

--------------------------------

### Set Puck Monospaced Font Family (CSS)

Source: https://puckeditor.com/docs/api-reference/theming

This snippet shows how to customize the font family for monospaced elements within the Puck interface using the `--puck-font-family-monospaced` CSS variable. The default Puck CSS bundle is safe to use here as monospaced fonts do not rely on external files.

```css
/* Monospaced fonts don't use external files, so the default bundle is safe */
@import "@measured/puck/puck.css";

:root {
  --puck-font-family-monospaced: Menlo;
}
```

--------------------------------

### Set Minimum Empty Height for Slot

Source: https://puckeditor.com/docs/api-reference/fields/slot

Configure the minEmptyHeight prop to control the minimum pixel height displayed when the slot is empty. Default is 128 pixels.

```javascript
const config = {
  components: {
    Example: {
      render: () => {
        return <Content minEmptyHeight={256} />;
      },
    },
  },
};
```

--------------------------------

### Enabling Content Editable for Custom Fields (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/custom

This code illustrates how to enable inline text editing for a custom field in Puck Editor by setting the 'contentEditable' option to 'true'. It includes a note about potential type changes in TypeScript and shows how to bind the input value for two-way data binding.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "custom",
          contentEditable: true,
          render: ({ name, onChange, value }) => (
            <input
              value={value} // Bind to value for 2-way binding
              name={name}
              onChange={(e) => onChange(e.currentTarget.value)}
            />
          ),
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Override Puck Editor Outline with React

Source: https://puckeditor.com/docs/api-reference/overrides/outline

This snippet demonstrates how to override the default outline behavior in Puck Editor using a React component. It accepts 'children' as its main prop, allowing you to define the structure of the outline.

```javascript
const overrides = {
  outline: ({ children }) => <div>{children}</div>,
};
```

--------------------------------

### transformProps Function

Source: https://puckeditor.com/docs/api-reference/functions/transform-props

The transformProps function is a utility for modifying component props stored in a Data payload. It is particularly useful for prop renames and data migrations, affecting all data within 'content' and 'zones'.

```APIDOC
## transformProps Function

### Description
Transforms component props stored in a Data payload. This convenience method can be used for prop renames and other data migrations. This method will modify all data in `content` and `zones`.

### Method
Utility Function

### Endpoint
N/A (Client-side function)

### Parameters
#### Args
- **data** (Data) - Required - The Data payload to be transformed.
- **transforms** (Object) - Required - An object describing the transform functions for each component defined in your `config`. `root` is a reserved property and can be used to update the `root` component props.
- **config** (Config) - Optional - A config object. Required if transforming data within slots.

### Request Example
```javascript
import { transformProps } from "@measured/puck";

const data = {
  content: [{ type: "HeadingBlock", props: { title: "Hello, world" } }],
};

const updatedData = transformProps(data, {
  // Rename `title` to `heading`
  HeadingBlock: ({ title, ...props }) => ({ heading: title, ...props }),
});

console.log(updatedData);
// { content: [{ type: "HeadingBlock", props: { heading: "Hello, world" } }] };
```

### Response
#### Returns
- **Data** - The updated Data object.

#### Response Example
```json
{
  "content": [
    {
      "type": "HeadingBlock",
      "props": {
        "heading": "Hello, world"
      }
    }
  ]
}
```

### Notes
- Its important to consider that data may include both components with old data and new data, and write your transform accordingly.
```

--------------------------------

### Configure Collision Detection Axis for Slot

Source: https://puckeditor.com/docs/api-reference/fields/slot

Set the collisionAxis prop to control drag-and-drop overlap detection behavior. Options include 'x' for horizontal, 'y' for vertical, or 'dynamic' for automatic axis selection based on travel direction.

```javascript
const config = {
  components: {
    Example: {
      render: ({ content: Content }) => {
        return <Content collisionAxis="dynamic" />;
      },
    },
  },
};
```

--------------------------------

### Override Puck Editor Header with React

Source: https://puckeditor.com/docs/api-reference/overrides/header

This snippet demonstrates how to override the default header in Puck Editor using a React component. The override object takes a 'header' property which is a function that receives 'actions' and returns a React element. The 'actions' prop contains elements for header actions.

```javascript
const overrides = {
  header: ({ actions }) => (
    <header>
      <span>My header</span>
      <div>{actions}</div>
    </header>
  ),
};
```

--------------------------------

### Customize Modal Footer in Puck Editor

Source: https://puckeditor.com/docs/api-reference/fields/external

Allows customization of the modal footer content by providing a render function. This function receives the current items and can display dynamic information, such as the count of results. It's part of the 'external' data type configuration.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async () => {
            return [
              { title: "Hello, world", description: "Lorem ipsum 1" },
              { title: "Goodbye, world", description: "Lorem ipsum 2" },
            ];
          },
          renderFooter: ({ items }) => (
            <b>Custom footer with {items.length} results</b>
          ),
        },
      },
      render: ({ data }) => {
        return <p>{data || "No data selected"}</p>;
      },
      // ...
    },
  },
};
```

--------------------------------

### Override Puck Children with Custom Wrapper

Source: https://puckeditor.com/docs/api-reference/overrides/puck

Override the default Puck component children by providing a custom render function. This allows wrapping the default children in custom containers or applying custom logic. The override receives the default children as a prop and should return a ReactNode.

```jsx
const overrides = {
  puck: ({ children }) => <div>{children}</div>,
};
```

--------------------------------

### Configure Filter Fields for External Data

Source: https://puckeditor.com/docs/api-reference/fields/external

Define filter fields that allow users to filter external data sources using the Fields API. The filterFields object specifies filter types (e.g., number, text) that modify the fetchList query parameters. Filters are passed as an object to the async fetchList function.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async ({ filters }) => {
            return [
              { title: "Apple", description: "Lorem ipsum 1", rating: 5 },
              { title: "Orange", description: "Lorem ipsum 2", rating: 3 }
            ].filter((item) => item.rating >= (filters.rating || 0));
          },
          filterFields: {
            rating: {
              type: "number"
            }
          }
        }
      }
    }
  }
};
```

--------------------------------

### Disable iframe Rendering in Puck Editor

Source: https://puckeditor.com/docs/integrating-puck/viewports

Shows how to disable the default iframe rendering for viewports in the Puck editor using the `iframe` API. Setting `enabled` to `false` disables all viewport functionality, which might be useful in specific integration scenarios.

```javascript
import React from "react";
import { Puck } from "@measured/puck";

export function Editor() {
  return (
    <Puck
      iframe={{
        enabled: false,
      }}
      // ...
    />
  );
}
```

--------------------------------

### Exclude HeadingBlock Title Field from AI Generation (JavaScript)

Source: https://puckeditor.com/docs/api-reference/ai/configuration/fields

This code snippet shows how to exclude a specific field, 'title' in 'HeadingBlock', from being processed or generated by AI. The 'exclude' parameter is set to true.

```javascript
const config = {
  components: {
    HeadingBlock: {
      fields: {
        title: {
          type: "text",
          ai: {
            exclude: true,
          },
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Define External Field Type Declaration

Source: https://puckeditor.com/docs/api-reference/fields/external

Minimal configuration declaring an external field with required type property. The type must be set to 'external' to enable the external input modal for data selection.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async () => {
            return [
              { title: "Hello, world", description: "Lorem ipsum 1" },
              { title: "Goodbye, world", description: "Lorem ipsum 2" },
            ];
          },
        },
      },
      // ...
    },
  },
};
```

--------------------------------

### Preventing Duplicate resolveData Calls in JavaScript

Source: https://puckeditor.com/docs/integrating-puck/dynamic-props

Shows a method to prevent unnecessary or expensive operations within `resolveData`, such as API calls. By checking the `changed` parameter, the function ensures that the expensive operation is only executed if a specific prop (like 'text') has actually changed since the last resolution.

```javascript
const config = {
  components: {
    HeadingBlock: {
      // ...
      resolveData: async ({ props }, { changed }) => {
        if (!changed.text) return { props };
 
        return {
          props: {
            resolvedTitle: await expensiveOperation(props.title),
          },
        };
      },
      // ...
    },
  },
};

async function expensiveOperation(title) {
  // Simulate an expensive API call
  return new Promise(resolve => {
    setTimeout(() => {
      resolve(`Processed: ${title}`);
    }, 1000);
  });
}
```

--------------------------------

### Enable Content Editable Text Field

Source: https://puckeditor.com/docs/api-reference/fields/text

Configure inline text editing for a text field using the contentEditable parameter. When enabled, the string prop is converted to an object when rendered inside Puck component (not in Render component). For TypeScript projects, update type annotations from string to string | ReactNode.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        title: {
          type: "text",
          contentEditable: true,
        },
      },
    },
  },
};
```

--------------------------------

### Textarea Field with Content Editable Rendering

Source: https://puckeditor.com/docs/api-reference/fields/textarea

Enables inline text editing for the textarea field by setting contentEditable to true. When used inside Puck, the String prop is converted to an Object; TypeScript types should be updated to accept string | ReactNode.

```JavaScript
const config = {
  components: {
    Example: {
      fields: {
        description: {
          type: "textarea",
          contentEditable: true,
        },
      },
      render: ({ description }) => {
        return <p>{description}</p>;
      },
    },
  },
};
```

--------------------------------

### Transform Selected Item Data with Map Prop

Source: https://puckeditor.com/docs/api-reference/fields/external

Define mapProp callback to modify the shape of the selected item before it is written to the page data. The transformed value replaces the original item in the component state. Useful for extracting specific properties or computing derived values from selected items.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async () => {
            return [
              { title: "Hello, world", description: "Lorem ipsum 1" },
              { title: "Goodbye, world", description: "Lorem ipsum 2" }
            ];
          },
          mapProp: (item) => item.description
        }
      },
      render: ({ data }) => {
        return <p>{data || "No data selected"}</p>;
      }
    }
  }
};
```

--------------------------------

### Define Object Field with Nested Fields (JavaScript)

Source: https://puckeditor.com/docs/api-reference/fields/object

This code snippet illustrates the definition of an 'object' type field named 'items' within a Puck Editor component. It utilizes 'objectFields' to describe the structure of the nested object, including a 'title' field of type 'text'.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        items: {
          type: "object",
          objectFields: {
            title: { type: "text" },
          },
        },
      },
      // ...
    },
  },
};

```

--------------------------------

### Override Field Label in Puck Editor (React)

Source: https://puckeditor.com/docs/api-reference/overrides/field-label

Demonstrates how to override the default label for internal fields in Puck Editor using a React component. This allows for custom rendering of field labels, including additional elements like a label div. It requires React and the Puck Editor library.

```javascript
const overrides = {
  fieldLabel: ({ children, label }) => (
    <label>
      <div>{label}</div>
      {children}
    </label>
  ),
};

```

--------------------------------

### Transform Item Display in Table with Map Row

Source: https://puckeditor.com/docs/api-reference/fields/external

Define mapRow callback to modify how items are rendered in the selection table without affecting the actual selected data value. The original item data is preserved for mapProp and getItemSummary. Useful for formatting display values like uppercase text or computed columns.

```javascript
const config = {
  components: {
    Example: {
      fields: {
        data: {
          type: "external",
          fetchList: async () => {
            return [
              { title: "Hello, world", description: "Lorem ipsum 1" },
              { title: "Goodbye, world", description: "Lorem ipsum 2" }
            ];
          },
          mapRow: (item) => ({ ...item, title: item.title.toUpperCase() })
        }
      },
      render: ({ data }) => {
        return <p>{data || "No data selected"}</p>;
      }
    }
  }
};
```

--------------------------------

### FieldLabel: Indicate read-only state

Source: https://puckeditor.com/docs/api-reference/components/field-label

Set the 'readOnly' prop to true to visually indicate that the field is in a read-only state, typically by displaying a padlock icon.

```jsx
import { FieldLabel } from "@measured/puck";
 
const CustomField = () => (
  <FieldLabel label="Title" readOnly>
    <input readOnly />
  </FieldLabel>
);
 
// ...
```

--------------------------------

### Override Field Types in Puck Editor (JavaScript)

Source: https://puckeditor.com/docs/api-reference/overrides/field-types

Demonstrates how to override default field types in Puck Editor by providing custom React components. This allows for tailored input elements for 'number' and 'text' fields, with the ability to extend this for new or existing types. The `onChange` prop is used to propagate changes back to the editor.

```javascript
const overrides = {
  fieldTypes: {
    number: ({ onChange }) => (
      <input type="number" onChange={(e) => onChange(e.currentTarget.value)} />
    ),
    text: ({ onChange }) => (
      <input type="text" onChange={(e) => onChange(e.currentTarget.value)} />
    ),
    // ...
  },
};
```

--------------------------------

### Change Puck Font Family with CSS Variable

Source: https://puckeditor.com/docs/extending-puck/theming/fonts

This code demonstrates how to change the default font family used by Puck. By setting the `--puck-font-family` CSS property, you can specify any font, such as 'Arial'. It also includes the import for local font files.

```css
/* @import "@measured/puck/puck.css"; */
@import "@measured/puck/no-external.css";

:root {
  --puck-font-family: Arial;
}
```

=== COMPLETE CONTENT === This response contains all available snippets from this library. No additional content exists. Do not make further requests.